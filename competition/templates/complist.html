{% extends "home/social_base.html" %}
{% load static %}

{% block content %}
<style>
    .activeBtn {
        color: white;
        border-radius: 20px;
        padding: 8px;
        padding-right: 35px;
        background-image: linear-gradient(to right, #519cf8, #1253a3);
        /* width: 100px; */
        padding-left: 37px;
    }

    .lateBtn {
        color: white;
        border-radius: 20px;
        padding: 8px;
        padding-right: 35px;
        background-image: linear-gradient(to right, #519cf8, #1253a3);
        /* width: 180px; */
        padding-left: 37px;
        

    }

    .beginBtn {
        margin-left: 10px;
        color: #636369;
        border-radius: 20px;
        padding: 8px;
        background: #adb4c25e;
        padding-right: 25px;
        /* width: 130px; */
        padding-left: 28px;
        

    }

    .advBtn {
        margin-left: 35px;
        color: #636369;
        border-radius: 20px;
        padding: 8px;
        background: #adb4c25e;
        padding-right: 25px;
        /* width: 130px; */
        padding-left: 30px;
        
    }

    .blog-post {
        max-width: 80rem;
        padding: 1rem;
        background-color: #fff;
        box-shadow: 0 1.2rem 6rem rgba(0, 0, 0, .15);
        display: flex;
        align-items: center;
        border-radius: .8rem;
        margin-top: 2rem;
    }

    .blog-post_img {
        min-width: 25rem;
        max-width: 25rem;
        padding: .7rem;
        height: 15rem;
        position: relative;
    }

    .blog-post_img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        border-radius: .8rem;
    }

    .blog-post_img::before {
        content: '';
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        border-radius: .8rem;
    }

    .blog-post_title {
        font-size: 2rem;
        margin-bottom: 1rem;
        text-transform: uppercase;
        color: #4facfe;
        font-weight: bold;
    }

    .blog-post_info {

        margin: 1rem 2rem;
        /* font-size: 1.4rem;
        color: rgba(0,0,0,.7); */
    }

    .blog-post_cta {
        display: inline-block;
        margin-top: 1.6rem;
    }

    .option-tab{
        cursor: pointer;
        width: 8rem;
        color: #CECECE;
    }
    
    .option-tab.is-active{
        color: #393A4F !important;
        /* box-shadow: inset 0 -2px black; */
    }
    @media screen and (min-width:1290px) and (max-width:1500px){
        .blog-post {
        }
    }

    @media screen and (max-width:1068px) {
        .blog-post {
            
        }

        .options-nav{
            margin-top: 1rem;
        }

        .blog-post_info {
            margin: 1rem 1rem;
        }

        .blog-post_img {
            max-width: 20rem;
            min-width: 20rem;
        }

        .beginBtn {
            margin-left: 0%;
        }
    }

    @media screen and (max-width:868px) {
        .blog-post {
        }

        .blog-post_info {
            margin: 1rem 1rem;
        }

        .beginBtn {
            margin-left: 0%;
        }
    }

    @media screen and (max-width:768px) {
        .blog-post {
            padding: 1rem;
            flex-direction: column;
        }

        .beginBtn {
            margin-left: 0%;
        }

        .blog-post_info {
            margin: unset;
            width: 100%;
        }

        .blog-post_img {
            max-width: 100%;
            min-width: 100%;
            transform: translate(0, -.5rem);
        }

        .option-tab{
            font-size: .75rem;
        }
    }
</style>

<div class="view-wrapper">

    <!-- /partials/global/options-nav/friends-options-nav.html -->
    <div class="options-nav no-shadow">
        <div class="nav-inner is-friends">
            <div class="option-tabs d-flex justify-content-start" style="width: 30rem;overflow-x: auto;">
                <div class="option-tab is-active" data-tab="all-friends">
                    Active
                </div>
                <div class="option-tab" data-tab="starred-friends" style="white-space: nowrap;">
                    Late Submission
                </div>
                <div class="option-tab" data-tab="new-friends">
                    Closed
                </div>
                <div class="option-naver"></div>
            </div>
        </div>
    </div>



    <div id="friends-page" class="friends-wrapper main-container mt-4">
        <!--First tab-->
        <div id="all-friends" class="sec-row-wrap is-active">
        {% for list in list %}
            {%if list.status == "Active" %}
            <div class="blog-post">
                <div class="blog-post_img">
                    {% if list.image %}
                    <img src="{{list.image.url}}" alt="">
                    {% endif %}
                </div>
                <div class="blog-post_info">
                    <a href="{% url 'Competion:detail' list.id %}">
                        <h1 class="mb-3" style="font-weight: 500;font-size: 22px;">{{ list.name }}</h1>
                    </a>
                    <p class="blog-post_text">{{ list.overview | safe |truncatewords:35 }}</p>

                    <h3 class="activeBtn blog-post_cta" align="center" style="color: white;padding: 0.5em 3em;min-width: 150px;"> {{list.status}}</h3>

                    <h3 class="beginBtn blog-post_cta" align="center" style="color:#636369;min-width: 150px;">{{list.level}}</h3>

                </div>
            </div>
            {%endif%}
        {% endfor %}
        </div>

        <!--Friend-->
        <!--Second tab-->
        <div id="starred-friends" class="sec-row-wrap" style="display: none;">
        {% for list in list %}
            {%if list.status == "Late Submission" %}
            <div class="conatiner">
                <div class="blog-post">
                    <div class="blog-post_img">
                        {% if list.image %}
                        <img src="{{list.image.url}}" alt="">
                        {% endif %}
                    </div>
                    <div class="blog-post_info">
                        <a href="{% url 'Competion:detail' list.id %}">
                        <h1 class="mb-3" style="font-weight: 500;font-size: 22px;">{{ list.name }}</h1>
                    </a>
                    <p class="blog-post_text">{{ list.overview | safe |truncatewords:35 }}</p>

                    <h3 class="activeBtn blog-post_cta" align="center" style="color: white;padding: 0.5em 3em;min-width: 150px;"> {{list.status}}</h3>

                    <h3 class="beginBtn blog-post_cta" align="center" style="color:#636369;min-width: 150px;">{{list.level}}</h3>

                    </div>
                </div>
            </div>
            {%endif%}
        {% endfor %}
        </div>

        <div id="new-friends" class="sec-row-wrap" style="display: none;">
        {% for list in list %}
            {%if list.status == "Closed" %}
            <div class="conatiner">
                <div class="blog-post">
                    <div class="blog-post_img">
                        {% if list.image %}
                        <img src="{{list.image.url}}" alt="">
                        {% endif %}
                    </div>
                    <div class="blog-post_info">
                        <a href="{% url 'Competion:detail' list.id %}">
                        <h1 class="mb-3" style="font-weight: 500;font-size: 22px;">{{ list.name }}</h1>
                    </a>
                    <p class="blog-post_text">{{ list.overview | safe |truncatewords:35 }}</p>

                    <h3 class="activeBtn blog-post_cta" align="center" style="color: white;padding: 0.5em 3em;min-width: 150px;"> {{list.status}}</h3>

                    <h3 class="beginBtn blog-post_cta" align="center" style="color:#636369;min-width: 150px;">{{list.level}}</h3>


                    </div>
                </div>
            </div>
            {%endif%}
        {% endfor %}
        </div>
    </div>
</div>
<script>
const optionTabs = document.querySelectorAll('.option-tab')
const optionNaver = document.querySelector('.option-naver')
const secEls = document.querySelectorAll('.sec-row-wrap')
console.log(optionTabs, secEls)
optionTabs?.forEach((tab)=>{
    tab.addEventListener('click', (e)=>{
        optionTabs?.forEach((t)=>{
            t.classList.remove('is-active')
        })
        secEls?.forEach((sec)=>{
            sec.classList.remove('is-active')
            sec.style.display = 'none';
        })
        tab.classList.add('is-active')
        let secId = tab.getAttribute('data-tab')
        const activeSec = document.getElementById(secId)
        activeSec.classList.add('is-active')
        activeSec.style.display = 'block'
        let num = [...optionTabs].indexOf(tab)
        optionNaver.style.marginLeft = `${num * 33.33}%`;
    })
})
</script>
{% endblock %}