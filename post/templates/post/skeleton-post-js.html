{% load static %}
<!DOCTYPE html>
<html lang="en">
<body>


<script>
    let first_level_category_mul = [];
    let second_level_category_mul = [];
    let third_level_category_mul = [];
    let fourth_level_category_mul = [];

    let currentPosts = $('.is-post').length;
    let csrfmiddlewaretoken = $("input[name='csrfmiddlewaretoken']").val();
    {## this fucntion createe div element for post ###}
    function createPost(posts)
    {
        posts.forEach(post =>

        {
            if(post.code === undefined || post.code===null ||post.code==='')
            {
                currentPosts += 1;
                            let likeStatus = "";
                            if (post.like_status) {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                        id="like-button` + post.post_id + `" class="like-button is-active">
                                        <i class="mdi mdi-heart not-liked bouncy"></i>
                                        <i class="mdi mdi-heart is-liked bouncy"></i>
                                        <span class="like-overlay"></span>
                                    </a>`;
                            }
                            else {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                                id="like-button` + post.post_id + `" class="like-button">
                                                <i class="mdi mdi-heart not-liked bouncy"></i>
                                                <i class="mdi mdi-heart is-liked bouncy"></i>
                                                <span class="like-overlay"></span>
                                            </a>`;
                            }
                            $('#refresh-div').append(`
<div id="feed-post-` + post.post_id + `" style="display: block;" class="card is-post `+ post.flag +`"
    data-category="` + post.category + `" data-language="` + post.language + `" data-id="` +
                            post.post_id + `" data-username="` + post.user + `" data-description="` + post.description +
                            `" data-counter="` + currentPosts + `" data-scope="` + post.scope_of_work + `"
    data-profile="` + post.profile + `"
    first_level_category="${post.first_level_category}"
    second_level_category="${post.second_level_category}"
    third_level_category="${post.third_level_category}"
    fourth_level_category="${post.fourth_level_category}"

    >
    <!-- Main wrap -->
    <div id="content-wrap`+ post.post_id +`" class="content-wrap">
        <!-- Post header -->
        <div class="card-heading">
            <!-- User meta -->
            <div class="user-block">
                <a class="image" href="`+ window.location.origin +`/user/profile/">
                    <img src="` + post.profile + `" data-user-popover="1" alt="">
                </a>
                <div class="user-info">
                    <a href="/user/profile/`+ post.user_id +`/">` + post.user + `</a>
                    <span class="time">` + post.timestamp + `</span>
                </div>
            </div>
            <!-- Right side dropdown -->
            <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
            <div id="options-`+ post.post_id +`" onclick="postOptions('`+ post.post_id +`')"
                class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                <div>
                    <div class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </div>
                </div>
                <div class="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <a onclick="BookMark('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="book-mark-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="`+ post.bookmark +`" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark">
                                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z">
                                                        </path>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Bookmark</h3>
                                    <small>Add this post to your bookmarks.</small>
                                </div>
                            </div>
                        </a>
<!--                        <a class="dropdown-item">-->
<!--                            <div class="media">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">-->
<!--                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>-->
<!--                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>-->
<!--                                                    </svg>-->
<!--                                <div class="media-content">-->
<!--                                    <h3>Notify me</h3>-->
<!--                                    <small>Send me the updates.</small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </a>-->
                        <hr class="dropdown-divider">
                        <a onclick="openFlag('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="flag-post-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag">
                                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z">
                                                        </path>
                                                        <line x1="4" y1="22" x2="4" y2="15"></line>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Flag</h3>
                                    <small>In case of inappropriate content.</small>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Post header -->

        <!-- Post body -->
        <div class="card-body">
            <!-- Post body text -->
            <div class="post-text">

                ` + post.description + `

            </div>
            <!-- Featured image -->
            <div class="post-image">
                `+(post.image1 != "" ? `
                <a data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image1 + `' %}"
                    href="` + post.image1 + `" data-demo-href="` + post.image1 + `' %}">
                    <center><img src="` + post.image1 + `" alt="" style="width: 100%;height: auto;margin-top: 1em;"></center>
                </a>
                ` : ``) +`
                `+ (post.image2 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image2 + `' %}"
                    href="` + post.image2 + `" data-demo-href="` + post.image2 + `' %}">
                    <img src="` + post.image2 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image3 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image3 + `' %}"
                    href="` + post.image3 + `" data-demo-href="` + post.image3 + `' %}">
                    <img src="` + post.image3 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image4 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image4 + `' %}"
                    href="` + post.image4 + `" data-demo-href="` + post.image4 + `' %}">
                    <img src="` + post.image4 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image5 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image5 + `' %}"
                    href="` + post.image5 + `" data-demo-href="` + post.image5 + `' %}">
                    <img src="` + post.image5 + `" alt="">
                </a>
                ` : ``)+`

                <!-- Action buttons -->
                <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                <div class="like-wrapper">
                    ` + likeStatus + `
                </div>

<!--                <div class="fab-wrapper is-share">-->
<!--                    <a href="javascript:void(0);" class="small-fab share-fab modal-trigger" data-modal="share-modal">-->
<!--                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link-2"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg>-->
<!--                    </a>-->
<!--                </div>-->

                <div class="fab-wrapper is-share is-active">
                    <a onclick="moreComments('` + post.post_id + `')" href="javascript:void(0);" class="small-fab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-message-circle">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <!-- /Post body -->

        <!-- Post footer -->
        <div class="card-footer">
            <!-- Followers avatars -->
            <!-- <div class="likers-group">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/dan.jpg' %}"
                                        data-user-popover="1" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/david.jpg' %}"
                                        data-user-popover="4" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/edward.jpeg"
                                        data-user-popover="5" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/milly.jpg' %}"
                                        data-user-popover="7" alt="">
                                </div> -->
            <!-- Followers text -->
            <div class="likers-text">
                <p><span class="likes-display` + post.post_id + `">` + post.likes + `</span> people liked this post
                </p>
            </div>
            <!-- Post statistics -->
            <div class="social-count" style="margin-top: 1em;">

                <div class="comments-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-circle">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span id="comment-counter` + post.post_id + `">`+ post.comments +`</span>
                </div>


                <div class="likes-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-heart">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                    <span class="likes-display` + post.post_id + `">` + post.likes + `</span>
                </div>




            </div>
        </div>
        <!-- /Post footer -->
    </div>
    <!-- /Main wrap -->

    <!-- Post Comments -->

    <!-- /Post Comments -->
    <div id="comments-wrap`+ post.post_id +`" class="comments-wrap is-hidden">
        <!-- Header -->
        <div class="comments-heading">
            <h4>Comments
                <small id="comment-header` + post.post_id + `">${post.comments}</small>
            </h4>
            <a onclick="closeComment('`+ post.post_id +`')" id="close-comment`+ post.post_id +`" class="close-comments">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </a>
        </div>
        <!-- /Header -->
        {% autoescape off %}
        <!-- Comments body -->
        <div id="comment-body` + post.post_id + `" class="comments-body has-slimscroll">
        </div>
        {% endautoescape %}
        <!-- /Comments body -->

        <!-- Comments footer -->
        <div class="card-footer">
            <div class="media post-comment has-emojis">
                <!-- Comment Textarea -->
                <div class="media-content">
                    <div class="field">
                        <div class="control">
                            <textarea name="comment` + post.post_id + `" id="post-comment-textarea-2"
                                class="textarea comment-textarea" rows="5" placeholder="Write a comment..."></textarea>
                        </div>
                    </div>
                    <center><small id="comment-text-action` + post.post_id + `" style="color: red; display: none;background: #FADBDE;padding: 0.5em;border-radius: 0.5em;">Enter some comment</small></center>
                    <!-- Additional actions -->
                    <div class="actions">
                        <div class="image is-32x32">
                            <img class="is-rounded" src="{{request.user.get_profile_img}}"
                                data-demo-src="{{request.user.get_profile_img}}" data-user-popover="0"
                                alt="">
                        </div>
                        <div class="toolbar">
<!--                            <div class="action is-auto">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-at-sign">-->
<!--                                    <circle cx="12" cy="12" r="4"></circle>-->
<!--                                    <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                            <div class="action is-emoji" id="post-comment-button-2">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-smile">-->
<!--                                    <circle cx="12" cy="12" r="10"></circle>-->
<!--                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>-->
<!--                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>-->
<!--                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>-->
<!--                                </svg>-->
<!--                            </div>-->
                            <!-- <div class="action is-upload">
                                                    <i data-feather="camera"></i>
                                                    <input type="file" name="image" id="comment_image"
                                                        accept=".png, .jpg, .jpeg">
                                                </div> -->
                            <button onclick="postComment('` + post.post_id + `')"
                                class="button is-solid primary-button raised">Post
                                Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments footer -->

    </div>
</div>
                            `);
            }
            else{
                code = post.code;
                currentPosts += 1;
                            let likeStatus = "";
                            if (post.like_status) {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                        id="like-button` + post.post_id + `" class="like-button is-active">
                                        <i class="mdi mdi-heart not-liked bouncy"></i>
                                        <i class="mdi mdi-heart is-liked bouncy"></i>
                                        <span class="like-overlay"></span>
                                    </a>`;
                            }
                            else {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                                id="like-button` + post.post_id + `" class="like-button">
                                                <i class="mdi mdi-heart not-liked bouncy"></i>
                                                <i class="mdi mdi-heart is-liked bouncy"></i>
                                                <span class="like-overlay"></span>
                                            </a>`;
                            }
                            $('#refresh-div').append(`
<div id="feed-post-` + post.post_id + `" style="display: block;" class="card is-post `+ post.flag +`"
    data-category="` + post.category + `" data-language="` + post.language + `" data-id="` +
                            post.post_id + `" data-username="` + post.user + `" data-description="` + post.description +
                            `" data-counter="` + currentPosts + `" data-scope="` + post.scope_of_work + `"
    data-profile="` + post.profile + `"
     first_level_category="${post.first_level_category}"
    second_level_category="${post.second_level_category}"
    third_level_category="${post.third_level_category}"
    fourth_level_category="${post.fourth_level_category}"
    >
    <!-- Main wrap -->
    <div id="content-wrap`+ post.post_id +`" class="content-wrap">
        <!-- Post header -->
        <div class="card-heading">
            <!-- User meta -->
            <div class="user-block">
                <a class="image" href="`+ window.location.origin +`/user/profile/">
                    <img src="` + post.profile + `" data-user-popover="1" alt="">
                </a>
                <div class="user-info">
                    <a href="/user/profile/`+ post.user_id +`/">` + post.user + `</a>
                    <span class="time">` + post.timestamp + `</span>
                </div>
            </div>
            <!-- Right side dropdown -->
            <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
            <div id="options-`+ post.post_id +`" onclick="postOptions('`+ post.post_id +`')"
                class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                <div>
                    <div class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </div>
                </div>
                <div class="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <a onclick="BookMark('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="book-mark-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="`+ post.bookmark +`" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark">
                                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z">
                                                        </path>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Bookmark</h3>
                                    <small>Add this post to your bookmarks.</small>
                                </div>
                            </div>
                        </a>
<!--                        <a class="dropdown-item">-->
<!--                            <div class="media">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">-->
<!--                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>-->
<!--                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>-->
<!--                                                    </svg>-->
<!--                                <div class="media-content">-->
<!--                                    <h3>Notify me</h3>-->
<!--                                    <small>Send me the updates.</small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </a>-->
                        <hr class="dropdown-divider">
                        <a onclick="openFlag('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="flag-post-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag">
                                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z">
                                                        </path>
                                                        <line x1="4" y1="22" x2="4" y2="15"></line>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Flag</h3>
                                    <small>In case of inappropriate content.</small>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Post header -->

        <!-- Post body -->
        <div class="card-body">
            <!-- Post body text -->
            <div class="post-text">

                ` + post.description + `
                <div style="background-color: #f5f5f5;border-radius: 0.5em;padding: 0.5em;margin-top: 1em;">
                <pre><code>${code}
            </code></pre>
            </div>
            </div>
            <!-- Featured image -->
            <div class="post-image">
                `+(post.image1 != "" ? `
                <a data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image1 + `' %}"
                    href="` + post.image1 + `" data-demo-href="` + post.image1 + `' %}">
                    <center><img src="` + post.image1 + `" alt="" style="width: 100%;height: auto;margin-top: 1em;"></center>
                </a>
                ` : ``) +`
                `+ (post.image2 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image2 + `' %}"
                    href="` + post.image2 + `" data-demo-href="` + post.image2 + `' %}">
                    <img src="` + post.image2 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image3 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image3 + `' %}"
                    href="` + post.image3 + `" data-demo-href="` + post.image3 + `' %}">
                    <img src="` + post.image3 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image4 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image4 + `' %}"
                    href="` + post.image4 + `" data-demo-href="` + post.image4 + `' %}">
                    <img src="` + post.image4 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image5 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image5 + `' %}"
                    href="` + post.image5 + `" data-demo-href="` + post.image5 + `' %}">
                    <img src="` + post.image5 + `" alt="">
                </a>
                ` : ``)+`

                <!-- Action buttons -->
                <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                <div class="like-wrapper">
                    ` + likeStatus + `
                </div>

<!--                <div class="fab-wrapper is-share">-->
<!--                    <a href="javascript:void(0);" class="small-fab share-fab modal-trigger" data-modal="share-modal">-->
<!--                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link-2"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg>-->
<!--                    </a>-->
<!--                </div>-->

                <div class="fab-wrapper is-share is-active">
                    <a onclick="moreComments('` + post.post_id + `')" href="javascript:void(0);" class="small-fab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-message-circle">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <!-- /Post body -->

        <!-- Post footer -->
        <div class="card-footer">
            <!-- Followers avatars -->
            <!-- <div class="likers-group">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/dan.jpg' %}"
                                        data-user-popover="1" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/david.jpg' %}"
                                        data-user-popover="4" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/edward.jpeg"
                                        data-user-popover="5" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/milly.jpg' %}"
                                        data-user-popover="7" alt="">
                                </div> -->
            <!-- Followers text -->
            <div class="likers-text">
                <p><span class="likes-display` + post.post_id + `">` + post.likes + `</span> people liked this post
                </p>
            </div>
            <!-- Post statistics -->
            <div class="social-count" style="margin-top: 1em;">

                <div class="comments-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-circle">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span id="comment-counter` + post.post_id + `">`+ post.comments +`</span>
                </div>

                <div class="likes-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-heart">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                    <span class="likes-display` + post.post_id + `">` + post.likes + `</span>
                </div>



            </div>
        </div>
        <!-- /Post footer -->
    </div>
    <!-- /Main wrap -->

    <!-- Post Comments -->

    <!-- /Post Comments -->
    <div id="comments-wrap`+ post.post_id +`" class="comments-wrap is-hidden">
        <!-- Header -->
        <div class="comments-heading">
            <h4>Comments
                <small id="comment-header` + post.post_id + `">${post.comments}</small>
            </h4>
            <a onclick="closeComment('`+ post.post_id +`')" id="close-comment`+ post.post_id +`" class="close-comments">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </a>
        </div>
        <!-- /Header -->
        {% autoescape off %}

        <!-- Comments body -->
        <div id="comment-body` + post.post_id + `" class="comments-body has-slimscroll">

        </div>
        <div id="load-more-comments-btn_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered">
                        <a onclick="moreComments(${post.post_id})" id="load-more" class="load-more-button">Load More</a>
                    </div>
                    <div id="no-comment-tag_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered" style="display: none;">
                        <p>No more posts!...</p>
                    </div>
        <!-- /Comments body -->
        {% endautoescape %}
        <!-- Comments footer -->
        <div class="card-footer">
            <div class="media post-comment has-emojis">
                <!-- Comment Textarea -->
                <div class="media-content">
                    <div class="field">
                        <div class="control">
                            <textarea name="comment` + post.post_id + `" id="post-comment-textarea-2"
                                class="textarea comment-textarea" rows="5" placeholder="Write a comment..."></textarea>
                        </div>
                    </div>
                    <center><small id="comment-text-action` + post.post_id + `" style="color: red; display: none;background: #FADBDE;padding: 0.5em;border-radius: 0.5em;">Enter some comment</small></center>
                    <!-- Additional actions -->
                    <div class="actions">
                        <div class="image is-32x32">
                            <img class="is-rounded" src="{{request.user.get_profile_img}}"
                                data-demo-src="{{request.user.get_profile_img}}" data-user-popover="0"
                                alt="">
                        </div>
                        <div class="toolbar">
<!--                            <div class="action is-auto">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-at-sign">-->
<!--                                    <circle cx="12" cy="12" r="4"></circle>-->
<!--                                    <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                            <div class="action is-emoji" id="post-comment-button-2">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-smile">-->
<!--                                    <circle cx="12" cy="12" r="10"></circle>-->
<!--                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>-->
<!--                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>-->
<!--                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>-->
<!--                                </svg>-->
<!--                            </div>-->
                            <!-- <div class="action is-upload">
                                                    <i data-feather="camera"></i>
                                                    <input type="file" name="image" id="comment_image"
                                                        accept=".png, .jpg, .jpeg">
                                                </div> -->
                            <button onclick="postComment('` + post.post_id + `')"
                                class="button is-solid primary-button raised">Post
                                Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments footer -->
    </div>
</div>
                            `);
            }
        });
    }



let dict;
    function filterPostMultiple()
    {
        let filter;
        let div_posts;
         dict = {
            "first_level_category": first_level_category_mul,
            "second_level_category": second_level_category_mul,
            "third_level_category": third_level_category_mul,
            "fourth_level_category": fourth_level_category_mul,
        }
        filter = '';
         $.each($('.is-post'), function(k,v){
               v.style.display = "none";
            });

         let first_category = [];
         let second_category = [];
         let third_category = [];
         let fourth_category = [];

         if(dict["first_level_category"].length <= 0)
         {
              $.each($('.is-post'), function(k,v){
               first_category.push(v);
            });
         }
         else {
             $.each(dict["first_level_category"], function (k, v) {
                 post = $(`div[first_level_category="${v}"]`);
                 $.each(post, function (k, v) {
                     first_category.push(v);
                 });
             });
         }

         if(dict["second_level_category"].length <= 0){
             second_category = first_category;
         }
         else {
             $.each(dict["second_level_category"], function (k, v) {
                 $.each(first_category, function (k, post) {
                     if ($(post).attr("second_level_category") === v) {
                         second_category.push(post);
                     }
                 });
             });
         }
         if(dict["third_level_category"].length <= 0){
             third_category = second_category;
         }
         else {
             $.each(dict["third_level_category"], function (k, v) {
                 $.each(second_category, function (k, post) {
                     if ($(post).attr("third_level_category") === v) {
                         third_category.push(post);
                     }
                 });
             });
         }
         if(dict["fourth_level_category"].length <= 0){
             fourth_category = third_category;
         }
         else {
             $.each(dict["fourth_level_category"], function (k, v) {
                 $.each(third_category, function (k, post) {
                     if ($(post).attr("fourth_level_category") === v) {
                         fourth_category.push(post);
                     }
                 });
             });
         }

         $.each($('.is-post'), function(k,v){
               v.style.display = "none";
            });

        $.each(fourth_category, function(key, div) {
            div.style.display = "block";
        });

    }

    function filterPost()
    {
        let div_posts;
        let filter;
        let dict = {
            "first_level_category": first_level_category,
            "second_level_category": second_level_category,
            "third_level_category": third_level_category,
            "fourth_level_category": fourth_level_category,
        }
        Object.keys(dict).forEach(key => dict[key] === undefined ? delete dict[key] : {});
        filter = '';
        $.each(dict, function(k,v){
            filter += `[${k} = ${v}]`;

        });

        if(filter.length > 2)
        {
            div_posts = $(`div${filter}`);
        }
        else{

            div_posts = '';
        }
        $.each($('.is-post'), function(k,v){
               v.style.display = "none";
            });
        if(div_posts.length > 0){
            $.each(div_posts, function(key, div){
           div.style.display = "block";
        });
        }
    }

    function clearAllFilters()
    {
        $.each($('.is-post'), function(k,v){
           v.style.display = "block";
        });
    }

    function setFirstLevelFilter(id, element_id)
    {
        let index = first_level_category_mul.indexOf(id);
        if(index === -1)
        {
            first_level_category_mul.push(id);
            $(`#${element_id}`).css("color", "red");
        }
        else{
            first_level_category_mul.splice(index, 1);
            $(`#${element_id}`).css("color", "black");
        }

        filterPostMultiple();
    }
    function setSecondLevelFilter(id,  element_id,first_id=null)
    {

        let index = second_level_category_mul.indexOf(id);
        if(index === -1)
        {
            second_level_category_mul.push(id);
            $(`#${element_id}`).css("color", "red");

        }
        else{
          $(`#${element_id}`).css("color", "black");

            second_level_category_mul.splice(index, 1);
        }

        filterPostMultiple();
    }
    function setThirdLevelFilter(id, element_id,first_id=null, second_id=null)
    {
        let index = third_level_category_mul.indexOf(id);
        if(index === -1)
        {
            third_level_category_mul.push(id);
                        $(`#${element_id}`).css("color", "red");

        }
        else{
            third_level_category_mul.splice(index, 1);
                        $(`#${element_id}`).css("color", "black");

        }

        filterPostMultiple();
    }
    function setFourthLevelFilter(id, element_id,first_id=null, second_id=null, third_id=null)
    {
        let index = fourth_level_category_mul.indexOf(id);
        if(index === -1)
        {
            fourth_level_category_mul.push(id);
                        $(`#${element_id}`).css("color", "red");

        }
        else{
            fourth_level_category_mul.splice(index, 1);
                        $(`#${element_id}`).css("color", "black");

        }

        filterPostMultiple();
    }

    function loadMorePost()
    {
       currentPosts = $('.is-post').length;
       $.ajax({
            method: "GET",
            url: "{% url 'post:load-more-skeleton' %}",
            data: {
                csrfmiddlewaretoken: csrfmiddlewaretoken,
                'current_posts': currentPosts,
                'category': 'normal',
            },
            success: function (response) {
                if (response.Status == false) {
                        $('#load-more-btn').css('display', 'none');
                        $('#no-post-tag').css('display', 'block');
                    }
                else {
                    createPost(response.posts);
                    }

            },
            error: function (response) {
            },
       });


    }
    $(document).ready(function(){

       $.ajax({
            method: "GET",
            url: "{% url 'post:load-more-skeleton' %}",
            data: {
                csrfmiddlewaretoken: csrfmiddlewaretoken,
                'current_posts': currentPosts,
                'category': 'normal',
            },
            success: function (response) {
                if (response.Status == false) {
                        $('#load-more-btn').css('display', 'none');
                        $('#no-post-tag').css('display', 'block');
                    }
                else {
                    createPost(response.posts);
                    }

            },
            error: function (response) {
            },
       });
       clearAllFilters();
    });





</script>



</body>
</html>