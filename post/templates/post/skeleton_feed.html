{% extends "home/social_base.html" %}
{% load static %}
{% block content %}

<style>
    filter-option:active {
  background-color: yellow;
}

    filter-option:hover {
  color: yellow;
}

</style>
{% autoescape off %}
<div class="view-wrapper">

    <!-- Container -->
    <div id="main-feed" class="container">

        <!-- Content placeholders at page load -->
        <!-- this holds the animated content placeholders that show up before content -->
        <div id="shadow-dom" class="view-wrap">
            <div class="columns">

                <div class="column is-3">

                    <!-- Placeload element -->
<!--                    <div class="placeload weather-widget-placeload">-->
<!--                        <div class="header">-->
<!--                            <div class="inner-wrap">-->
<!--                                <div class="img loads"></div>-->
<!--                                <div class="content-shape loads"></div>-->
<!--                                <div class="content-shape loads"></div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="body">-->
<!--                            <div class="inner-wrap">-->
<!--                                <div class="rect loads"></div>-->
<!--                                <div class="content-shape loads"></div>-->
<!--                                <div class="content-shape loads"></div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                    <!-- Placeload element -->
                    <div class="placeload list-placeload">
                        <div class="header">
                            <div class="content-shape loads"></div>
                        </div>
                        <div class="body">
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="column is-6">

                    <!-- Placeload element -->
                    <div class="placeload compose-placeload">
                        <div class="header">
                            <div class="content-shape is-lg loads"></div>
                            <div class="content-shape is-lg loads"></div>
                            <div class="content-shape is-lg loads"></div>
                        </div>
                        <div class="body">
                            <div class="img loads"></div>
                            <div class="inner-wrap">
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Placeload element -->
                    <div class="placeload post-placeload">
                        <div class="header">
                            <div class="img loads"></div>
                            <div class="header-content">
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                            </div>
                        </div>
                        <div class="image-placeholder loads"></div>
                        <div class="placeholder-footer">
                            <div class="footer-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Placeload element -->
                    <div class="placeload post-placeload">
                        <div class="header">
                            <div class="img loads"></div>
                            <div class="header-content">
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                            </div>
                        </div>
                        <div class="image-placeholder loads"></div>
                        <div class="placeholder-footer">
                            <div class="footer-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Placeload element -->
                    <div class="placeload post-placeload">
                        <div class="header">
                            <div class="img loads"></div>
                            <div class="header-content">
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                            </div>
                        </div>
                        <div class="image-placeholder loads"></div>
                        <div class="placeholder-footer">
                            <div class="footer-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Placeload element -->
                    <div class="placeload post-placeload">
                        <div class="header">
                            <div class="img loads"></div>
                            <div class="header-content">
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                            </div>
                        </div>
                        <div class="image-placeholder loads"></div>
                        <div class="placeholder-footer">
                            <div class="footer-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="column is-3">

                    <!-- Placeload element -->
                    <div class="placeload stories-placeload">
                        <div class="header">
                            <div class="content-shape loads"></div>
                        </div>
                        <div class="body">
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Placeload element -->
                    <div class="placeload mini-widget-placeload">
                        <div class="body">
                            <div class="inner-wrap">
                                <div class="img loads"></div>
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                                <div class="content-shape loads"></div>
                                <div class="button-shape loads"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Placeload element -->
                    <div class="placeload list-placeload">
                        <div class="header">
                            <div class="content-shape loads"></div>
                        </div>
                        <div class="body">
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                            <div class="flex-block">
                                <div class="img loads"></div>
                                <div class="inner-wrap">
                                    <div class="content-shape loads"></div>
                                    <div class="content-shape loads"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- Feed page main wrapper -->
        <div id="activity-feed" class="view-wrap true-dom is-hidden">
            <div class="columns">
                <!-- Left side column -->
                <div class="column is-3 is-hidden-mobile">
                    <!-- Weather widget -->
                    <!-- /partials/widgets/weather-widget.html -->
                    <div class="card is-weather-card has-background-image"
                        data-background="assets/img/illustrations/cards/weather-bg.svg' %}">
                        <div class="card-heading">
                            <div class="dropdown is-spaced is-accent is-right dropdown-trigger is-light">
                                <div>
                                    <div class="button">
                                        <i data-feather="more-vertical"></i>
                                    </div>
                                </div>
                                <div class="dropdown-menu" role="menu">
                                    <div class="dropdown-content">
                                        <a href="#" class="dropdown-item">
                                            <div class="media">
                                                <i data-feather="map-pin"></i>
                                                <div class="media-content">
                                                    <h3>Change City</h3>
                                                    <small>Change the displayed city.</small>
                                                </div>
                                            </div>
                                        </a>
                                        <a href="#" class="dropdown-item">
                                            <div class="media">
                                                <i data-feather="rotate-ccw"></i>
                                                <div class="media-content">
                                                    <h3>Synchronize</h3>
                                                    <small>Synchronize with a weather source.</small>
                                                </div>
                                            </div>
                                        </a>
                                        <a class="dropdown-item">
                                            <div class="media">
                                                <i data-feather="settings"></i>
                                                <div class="media-content">
                                                    <h3>Settings</h3>
                                                    <small>Access widget settings.</small>
                                                </div>
                                            </div>
                                        </a>
                                        <hr class="dropdown-divider">
                                        <a href="#" class="dropdown-item">
                                            <div class="media">
                                                <i data-feather="trash-2"></i>
                                                <div class="media-content">
                                                    <h3>Remove</h3>
                                                    <small>Removes this widget from your feed.</small>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="temperature" style="padding: 8em 1em;">
                                <span style="font-size: 16px;">Ads Here </span>
                            </div>
<!--                            <div class="weather-icon">-->
<!--                                <div>-->
<!--                                    <i data-feather="sun"></i>-->
<!--                                    <h4>Sunny</h4>-->
<!--                                    <div class="details">-->
<!--                                        <span>Real Feel: 78° </span>-->
<!--                                        <span>Rain Chance: 5%</span>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="previsions">-->
<!--                                <div class="day">-->
<!--                                    <span>Mon</span>-->
<!--                                    <i data-feather="sun"></i>-->
<!--                                    <span>69°</span>-->
<!--                                </div>-->
<!--                                <div class="day">-->
<!--                                    <span>Tue</span>-->
<!--                                    <i data-feather="cloud-lightning"></i>-->
<!--                                    <span>74°</span>-->
<!--                                </div>-->
<!--                                <div class="day">-->
<!--                                    <span>Wed</span>-->
<!--                                    <i data-feather="cloud-lightning"></i>-->
<!--                                    <span>73°</span>-->
<!--                                </div>-->
<!--                                <div class="day">-->
<!--                                    <span>Thu</span>-->
<!--                                    <i data-feather="sun"></i>-->
<!--                                    <span>68°</span>-->
<!--                                </div>-->
<!--                                <div class="day">-->
<!--                                    <span>Fri</span>-->
<!--                                    <i data-feather="cloud-drizzle"></i>-->
<!--                                    <span>55°</span>-->
<!--                                </div>-->
<!--                                <div class="day">-->
<!--                                    <span>Sat</span>-->
<!--                                    <i data-feather="cloud-rain"></i>-->
<!--                                    <span>58°</span>-->
<!--                                </div>-->
<!--                                <div class="day">-->
<!--                                    <span>Sun</span>-->
<!--                                    <i data-feather="sun"></i>-->
<!--                                    <span>64°</span>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="current-date-location has-text-centered">-->
<!--                                <span class="date">Sunday, 18th 2018</span>-->
<!--                                <span class="location"> <i data-feather="map-pin"></i> Los Angeles, CA</span>-->
<!--                            </div>-->
                        </div>
                    </div>

                    <!-- Fake Ad -->

                </div>
                <!-- /Left side column -->

                <!-- Middle column -->
                <div class="column is-6">

                    <!-- Publishing Area -->
                    <!-- /partials/pages/feed/compose-card.html -->

                    <!-- Post 1 -->
                    <div class="no-post"></div>
                    {% autoescape off %}
                    <div id="refresh-div">
                        <div id="flag-reason" class="is-hidden"
                            style="z-index: 1000; width: 50%; position: fixed; top: 30%; left: 25%; border: 2px solid black; background: white; border-radius: 12px;">
                            <a onclick="closeFlag()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="feather feather-x">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </a>
                            <div class="column is-12" style="margin-top: 10px;">
                                <div class="field field-group" style="margin-top: 5px;">
                                    <label>Reason</label>
                                    <div class="control has-icon">
                                        <input type="text" class="input is-fade" placeholder="Reason..."
                                            name="flag-reason" required>
                                        <div class="form-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="feather feather-briefcase">
                                                <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                                                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <button onclick="FlagPost()" style="margin-top: 10px;"
                                    class="button is-solid primary-button raised">Submit</button>
                            </div>
                            <input type="text" name="flag-post-id" hidden>
                        </div>
                    </div>
                    {% endautoescape %}
                    <!-- Load more posts -->
                    <div id="load-more-btn" class=" load-more-wrap narrow-top has-text-centered">
                        <a onclick="loadMorePost()" id="load-more" class="load-more-button">Load More</a>
                    </div>
                    <div id="no-post-tag" class=" load-more-wrap narrow-top has-text-centered" style="display: none;">
                        <p>No more posts!...</p>
                    </div>
                    <!-- /Load more posts -->

                </div>
                <!-- /Middle column -->

                <!-- Right side column -->
                <div class="column is-3">

                    <!-- Stories widget -->
                    <!-- /partials/widgets/stories-widget.html -->
                    <div class="card">
                        <div class="card-heading is-bordered">
                            <h4>Filters</h4>
                        </div>
                        <div class="card-body no-padding">
                            <div class="feed-menu-v1">
                                <ul style="padding-right: 0;" class="main-menu">

                                    {% for item in first_level_category %}
                                    <li class="">
                                        <a onclick="setFirstLevelFilter('{{ item.id }}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="feather feather-activity">
                                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                            </svg>
<!--                                            <a onclick="setFirstLevelFilter('{{ item.id }}')">-->
                                            <span>{{item.name}} </span>
                                            <span class="close-icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                    class="feather feather-chevron-right">
                                                    <polyline points="9 18 15 12 9 6"></polyline>
                                                </svg>
                                            </span>
                                        </a>
                                        <ul class="submenu" style="display: block;">
                                        {% for second_category in item.firstCat.all %}
                                            <li class="">
                                                <a class="filter-option" id="filter-all-{{item.name}}" onclick="setSecondLevelFilter('{{ second_category.id }}')" style="font-weight: 500;color: #039be5;">{{ second_category.name }}</a>
                                                <ul class="" style="display: block;padding-left: 20px;">
                                                    {% for third_category in second_category.firstCatThird.all %}
                                                    <li class="">
                                                        <a class="filter-option" onclick="setThirdLevelFilter('{{ third_category.id }}')" style="font-weight: 500;" onmouseover="this.style.color='#039be5'" onmouseout="this.style.color='black'">{{ third_category.name }}</a>
                                                        <ul class="" style="display: block;padding-left: 20px;">
                                                            {% for fourth_category in third_category.firstCatFourth.all %}
                                                            <li class="">
                                                                <a class="filter-option" onclick="setFourthLevelFilter('{{ fourth_category.id }}')" onmouseover="this.style.color='#039be5'" onmouseout="this.style.color='black'">{{ fourth_category.name }}</a>
                                                            </li>
                                                            {% endfor %}
                                                        </ul>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                        {% endfor %}
                                        </ul>
                                    </li>
                                    {% endfor %}


<!--                                    <li class="is-active">-->
<!--                                        <a>-->
<!--                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"-->
<!--                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"-->
<!--                                                stroke-linecap="round" stroke-linejoin="round"-->
<!--                                                class="feather feather-activity">-->
<!--                                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>-->
<!--                                            </svg>-->
<!--                                            <span>First Level Category</span>-->
<!--                                            <span class="close-icon">-->
<!--                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"-->
<!--                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"-->
<!--                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                                                    class="feather feather-chevron-right">-->
<!--                                                    <polyline points="9 18 15 12 9 6"></polyline>-->
<!--                                                </svg>-->
<!--                                            </span>-->
<!--                                        </a>-->
<!--                                        <ul class="submenu" style="display: block;">-->
<!--                                        {% for item in first_level_category %}-->
<!--                                            <li class="submenu">-->
<!--                                                <a id="filter-all" onclick="setFirstLevelFilter('{{ item.id }}')">{{ item.name }}</a>-->
<!--                                            </li>-->
<!--                                        {% endfor %}-->
<!--                                        </ul>-->
<!--                                    </li>-->


<!--                                    <li>-->
<!--                                        <a>-->
<!--                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"-->
<!--                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"-->
<!--                                                stroke-linecap="round" stroke-linejoin="round"-->
<!--                                                class="feather feather-help-circle">-->
<!--                                                <circle cx="12" cy="12" r="10"></circle>-->
<!--                                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>-->
<!--                                                <line x1="12" y1="17" x2="12.01" y2="17"></line>-->
<!--                                            </svg>-->
<!--                                            <span>Second Level Category</span>-->
<!--                                            <span class="close-icon">-->
<!--                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"-->
<!--                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"-->
<!--                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                                                    class="feather feather-chevron-right">-->
<!--                                                    <polyline points="9 18 15 12 9 6"></polyline>-->
<!--                                                </svg>-->
<!--                                            </span>-->
<!--                                        </a>-->
<!--                                        <ul class="submenu">-->
<!--                                        {% for item in second_level_category %}-->
<!--                                            <li>-->
<!--                                                <a id="filter-python" onclick="setSecondLevelFilter('{{ item.id }}','{{ item.first_category.id }}')">{{ item.name }}</a>-->
<!--                                            </li>-->
<!--                                        {% endfor %}-->
<!--                                        </ul>-->
<!--                                    </li>-->
<!--                                    <li>-->
<!--                                        <a>-->
<!--                                            <img src="https://img.icons8.com/ios/16/000000/info.png" />-->
<!--                                            <span>Third Level Category</span>-->
<!--                                            <span class="close-icon">-->
<!--                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"-->
<!--                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"-->
<!--                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                                                    class="feather feather-chevron-right">-->
<!--                                                    <polyline points="9 18 15 12 9 6"></polyline>-->
<!--                                                </svg>-->
<!--                                            </span>-->
<!--                                        </a>-->
<!--                                        <ul class="submenu">-->
<!--                                            {% for item in third_level_category %}-->
<!--                                            <li>-->
<!--                                                <a id="filter-scope1" onclick="setThirdLevelFilter('{{ item.id }}','{{ item.first_category.id }}','{{ item.second_category.id }}')">{{ item.name }}</a>-->
<!--                                            </li>-->
<!--                                            {% endfor %}-->
<!--                                        </ul>-->
<!--                                    </li>-->
<!--                                    <li>-->
<!--                                        <a>-->
<!--                                            <img src="https://img.icons8.com/ios/16/000000/code.png" />-->
<!--                                            <span>Fourth Level Category</span>-->
<!--                                            <span class="close-icon">-->
<!--                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"-->
<!--                                                    viewBox="0 0 24 24" fill="none" stroke="currentColor"-->
<!--                                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                                                    class="feather feather-chevron-right">-->
<!--                                                    <polyline points="9 18 15 12 9 6"></polyline>-->
<!--                                                </svg>-->
<!--                                            </span>-->
<!--                                        </a>-->
<!--                                        <ul class="submenu">-->
<!--                                            {% for item in fourth_level_category %}-->
<!--                                            <li>-->
<!--                                               <a id="filter-scope1" onclick="setFourthLevelFilter('{{ item.id }}','{{ item.first_category.id }}','{{ item.second_category.id }}', '{{ item.third_category.id }}')">{{ item.name }}</a>-->
<!--                                            </li>-->
<!--                                           {% endfor %}-->
<!--                                        </ul>-->
<!--                                    </li>-->

                                </ul>
                            </div>

                        </div>
                    </div>
                    <!-- Birthday widget -->
                    <!-- /partials/widgets/birthday-widget.html -->
                </div>
                <!-- /Right side column -->
            </div>
        </div>
        <!-- /Feed page main wrapper -->
    </div>
    <!-- /Container -->


    <!-- Google places Lib -->
    <script src="https://maps.google.com/maps/api/js?key=AIzaSyAGLO_M5VT7BsVdjMjciKoH1fFJWWdhDPU&amp;libraries=places">
    </script>
</div>
{% endautoescape %}



{% endblock content %}
{% block script %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
    let current_filter = "all";



    function closeComment(id) {
        $('#comments-wrap' + id).addClass('is-hidden');
        $('#content-wrap' + id).removeClass('is-hidden');
    }

    var searchbox = document.getElementById('search_input');
    searchbox.addEventListener('keyup', function () {
        var search = false;
        var searchQuery = this.value;
        $('#tipue_drop_content').css('display', 'block');
        $('#tipue_drop_wrapper').empty();
        $(".is-post").each(function () {
            if ($(this).data("description").includes(searchQuery)) {
                search = true;
                $('#tipue_drop_wrapper').append(`
                <a onclick="searchResult(` + $(this).data("id") + `)">
                    <div class="tipue_drop_item">
                        <div class="tipue_drop_left">
                            <img src="` + $(this).data("profile") + `" class="tipue_drop_image">
                        </div>
                        <div class="tipue_drop_right">
                            ` + $(this).data("description") + `<div><small>` + $(this).data("username") + `</small>
                        </div>
                    </div>
                </div>
                </a>
                `);
            } else if ($(this).data("username").includes(searchQuery)) {
                search = true;
                $('#tipue_drop_wrapper').append(`
                <a onclick="searchResult(` + $(this).data("id") + `)">
                    <div class="tipue_drop_item">
                        <div class="tipue_drop_left">
                            <img src="` + $(this).data("profile") + `" class="tipue_drop_image">
                        </div>
                        <div class="tipue_drop_right">
                            ` + $(this).data("description") + `
                            <div>
                                <small>` + $(this).data("username") + `</small>
                            </div>
                        </div>
                    </div>
                </a>
                `);
            }
        });
        if (search === false) {
            $('#tipue_drop_wrapper').html(`
            <div class="tipue_drop_item">
                <div class="tipue_drop_right">
                    <span style="color: red;">No search results!...</span>
                </div>
            </div>`);
        }
    });

    function searchResult(id) {
        $(".is-post").each(function () {
            if ($(this).data("id") === id) {
                $(this).css('display', 'block');
            } else {
                $(this).css('display', 'none');
            }
        });
    }





    function postSubmit() {
        var csrfmiddlewaretoken = $("input[name='csrfmiddlewaretoken']").val();
        var data = new FormData();
        data.append("csrfmiddlewaretoken", csrfmiddlewaretoken);
        data.append("category", "Skeleton Code");
        data.append("description", $("textarea[name='description']").val());
        data.append("language", $("input[name='language']").val());
        data.append("scope_of_work", $("input[name='scope_of_work']").val());
        $('#feed-upload').children().each(function () {
            var blobObject = blobCreationFromURL($(this).children("img").attr('src'));
            data.append("images", blobObject);
        });
        $.ajax({
            type: "POST",
            url: "{% url 'post:post' %}",
            data: data,
            enctype: 'multipart/form-data',
            contentType: false,
            processData: false,
            success: function (response) {
                if (response['Status'] === true) {
                    location.reload();
                } else {
                    alert(response['Message']);
                }
            },
            error: function (response) {
                console.log(response);
            },
        });
    }
    // Function converts url to file
    function blobCreationFromURL(dataURI) {
        const splitDataURI = dataURI.split(',')
        const byteString = splitDataURI[0].indexOf('base64') >= 0 ? atob(splitDataURI[1]) : decodeURI(splitDataURI[1])
        const mimeString = splitDataURI[0].split(':')[1].split(';')[0]

        const ia = new Uint8Array(byteString.length)
        for (let i = 0; i < byteString.length; i++)
            ia[i] = byteString.charCodeAt(i)

        return new Blob([ia], {
            type: mimeString
        })
    }

    function like(id, user) {
        var csrfmiddlewaretoken = $("input[name='csrfmiddlewaretoken']").val();
        if ($('#like-button' + id).hasClass('is-active')) {
            $('#like-button' + id).removeClass('is-active');
        } else {
            $('#like-button' + id).addClass('is-active');
        }
        $.ajax({
            async: true,
            method: "POST",
            url: "{% url 'post:like' %}",
            data: {
                csrfmiddlewaretoken: csrfmiddlewaretoken,
                'id': id,
                'user': user
            },
            success: function (response) {
                $('.likes-display' + id).html(response['likes']);
            },
            error: function (response) {
                console.log(response);
            },
        });
    }



    function postComment(id) {
        var formData = new FormData();
        var comment = $("textarea[name='comment" + id + "']").val();
        if (comment === "") {
            $("#comment-text-action" + id).css({
                display: "block"
            });
        } else {
            $("#comment-text-action" + id).css({
                display: "none"
            });
            formData.append('csrfmiddlewaretoken', $("input[name='csrfmiddlewaretoken']").val());
            formData.append('id', id);
            formData.append('comment', comment);
            // formData.append('image', $("#comment_image")[0].files[0]);
            $.ajax({
                type: "POST",
                url: "{% url 'post:skeleton-post-comment' %}",
                data: formData,
                contentType: false,
                processData: false,
                success: function (response) {
                    if (response['status'] === false) {
                        alert(response['Message']);
                    }
                    $("textarea[name='comment" + id + "']").val("");
                    getSingleComment(id);
                },
                error: function (response) {
                    alert(response['Message']);
                },
            });
        }
    }

    function getSingleComment(id)
    {
        $.ajax({
            async: true,
            method: "GET",
            url: "{% url 'post:get-single-skeleton-comment' %}",
            data: {
                'post_id': id,
            },
            success: function (response) {
                    response.comments.forEach(data =>
            {

            if (data.user_profile === '') {
                    var profile = "{% static 'social_assets/img/avatars/dan.jpg' %}";
                } else {
                    var profile = window.location.origin + data.user_profile;
                }
            html = `<div class="media is-comment">
                            <div class="media-left">
                                <div class="image">
                                    <img src="${profile}"
                                        data-demo-src="" data-user-popover="1" alt="">
                                </div>
                            </div>
                            <div class="media-content">
                                <a href="/user/profile/${data.post_user_id}">${data.post_user}</a>
                                <span class="time">${data.user}&nbsp;&nbsp; - &nbsp;&nbsp;${data.timestamp}</span>
                                <p>${data.comment}</p>
                                <div class="controls"> </div>
                            </div>
                            <div class="media-right">
                                <div class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                                    <div>
                                        <div class="button">
                                            <i data-feather="more-vertical"></i>
                                        </div>
                                    </div>
                                    <div class="dropdown-menu" role="menu">
                                        <div class="dropdown-content">
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="x"></i>
                                                    <div class="media-content">
                                                        <h3>Hide</h3>
                                                        <small>Hide this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="flag"></i>
                                                    <div class="media-content">
                                                        <h3>Report</h3>
                                                        <small>Report this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                $('#comment-body' + data.post_id).prepend(html);
        }
        );
            },
        })
    }

    function createComment(id, comments)
    {
        comments.forEach(data =>

            {

            if (data.user_profile === '') {
                    var profile = "{% static 'social_assets/img/avatars/dan.jpg' %}";
                } else {
                    var profile = window.location.origin + data.user_profile;
                }
                document.getElementById('comment-body' + id).innerHTML +=
                    `
                            <div class="media is-comment">
                            <div class="media-left">
                                <div class="image">
                                    <img src="` + profile + `"
                                        data-demo-src="" data-user-popover="1" alt="">
                                </div>
                            </div>
                            <div class="media-content">
                                <a href="/user/profile/` + data.post_user_id +`">` + data.post_user + `</a>
                                <span class="time">` + data.user + `  &nbsp;&nbsp; - &nbsp;&nbsp;`+ data.timestamp +` </span>
                                <p>` + data.comment + `</p>

                                <div class="controls">
<!--                                    <div class="like-count">-->
<!--                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-thumbs-up"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg>-->
<!--                                        <span>4</span>-->
<!--                                    </div>-->
<!--                                    <div class="reply">-->
<!--                                        <a>Reply</a>-->
<!--                                    </div>-->
<!--                                    <div class="edit">-->
<!--                                        <a>Edit</a>-->
<!--                                    </div>-->
                                </div>
                            </div>
                            <div class="media-right">
                                <div class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                                    <div>
                                        <div class="button">
                                            <i data-feather="more-vertical"></i>
                                        </div>
                                    </div>
                                    <div class="dropdown-menu" role="menu">
                                        <div class="dropdown-content">
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="x"></i>
                                                    <div class="media-content">
                                                        <h3>Hide</h3>
                                                        <small>Hide this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="flag"></i>
                                                    <div class="media-content">
                                                        <h3>Report</h3>
                                                        <small>Report this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
        }
        );
    }

    function moreComments(post_id)
    {
        $("#comment-text-action" + post_id).css({
            display: "none"
        });
        $('#comments-wrap' + post_id).removeClass('is-hidden');
        $('#content-wrap' + post_id).addClass('is-hidden');

        currentComments = $(`#comment-body${post_id} .is-comment`).length;
        $.ajax({
            async: true,
            method: "GET",
            url: "{% url 'post:load-more-skeleton-comments' %}",
            data: {
                'post_id': post_id,
                'current_comments': currentComments,
            },
            success: function (response) {
                console.log(response);
                    if (response.Status == false) {
                        $(`#load-more-comments-btn_${post_id}`).css('display', 'none');
                        $(`#no-comments-tag_${post_id}`).css('display', 'block');
                    } else {
                        createComment(post_id,response.comments);
                    }
            },
        })
    }

    function display_comments(id) {
        $("#comment-text-action" + id).css({
            display: "none"
        });
        $('#comments-wrap' + id).removeClass('is-hidden');
        $('#content-wrap' + id).addClass('is-hidden');
        moreComments();
    }

    function postOptions(id) {
        $("#options-" + id).addClass('is-active');
    }

    function BookMark(id) {
        var csrfmiddlewaretoken = $("input[name='csrfmiddlewaretoken']").val();
        $("#options-" + id).removeClass('is-active');
        $.ajax({
            async: true,
            method: "POST",
            url: "{% url 'post:book-mark' %}",
            data: {
                csrfmiddlewaretoken: csrfmiddlewaretoken,
                'id': id,
            },
            success: function (response) {
                if (response['Status'] === false) {
                    alert(response['Message']);
                } else if (response['Status'] === 1) {
                    $('#book-mark-' + id).css('fill', '#1589FF');
                } else {
                    $('#book-mark-' + id).css('fill', 'none');
                }
            },
            error: function (response) {
                alert(response['Message']);
            },
        });
    }

    function FlagPost() {
        var csrfmiddlewaretoken = $("input[name='csrfmiddlewaretoken']").val();
        $("#options-" + id).removeClass('is-active');
        $('#flag-reason').removeClass('is-hidden');
        var id = $("input[name='flag-post-id']").val();
        var reason = $("input[name='flag-reason']").val();
        if (reason === "") {
            alert("Please tell us the reason...");
        } else {
            $.ajax({
                async: true,
                method: "POST",
                url: "{% url 'post:flag-post' %}",
                data: {
                    csrfmiddlewaretoken: csrfmiddlewaretoken,
                    'id': id,
                    'reason': reason,
                },
                success: function (response) {
                    console.log(response, id);
                    if (response['Status'] === false) {
                        alert(response['Message']);
                    } else if (response['Status'] === true) {
                        $('#flag-post-' + id).css('fill', '#FF0000');
                        $('#feed-post-' + id).addClass('is-hidden');
                        $('#flag-reason').addClass('is-hidden');
                        alert('Your response has been submitted successfully...');
                    }
                    // else{
                    //     $('#flag-post-' + id).css('fill', 'none');
                    // }
                },
                error: function (response) {
                    alert(response['Message']);
                },
            });
        }
    }

    function openFlag(id) {
        $('#flag-reason').removeClass('is-hidden');
        $("input[name='flag-post-id']").val(id);
    }

    function closeFlag() {
        $('#flag-reason').addClass('is-hidden');
    }

    function mediaFiles() {
        const file = document.querySelector('#media-input').files;
        file.forEach(element => {
            getBase64(element).then(
                data => $("#feed-upload").append(`
                    <div class="upload-wrap">
                        <img src="` + data + `">
                        <span class="remove-file">
                            <svg onclick="$(this).parent().parent().remove()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18">
                                </line><line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </span>
                    </div>
                `)
            );
        });
    }

    function getBase64(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });
    }

</script>
    {% include 'post/skeleton-post-js.html' %}
{% endblock %}