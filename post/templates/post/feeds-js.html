{% load static %}
<!DOCTYPE html>
<html lang="en">
<body>

<script>
    let category = undefined;
    let language = undefined;
    let scope_of_work = undefined;

    let currentPosts = $('.is-post').length;
    let dict;

    function filterPost()
    {
        let filter;
        let div_posts;
         dict = {
            "category": category,
            "language": language,
            "scope_of_work": scope_of_work,
        }
        Object.keys(dict).forEach(key => dict[key] === undefined ? delete dict[key] : {});
        filter = '';
        $.each(dict, function(k,v){
            filter += `[${k} = "${v}"]`;

        });
        console.log(filter);
        if(filter.length > 2)
        {
            div_posts = $(`div${filter}`);
        }
        else{
            div_posts = '';
        }
        console.log(div_posts);

        $.each($('.is-post'), function(k,v){
               v.style.display = "none";
            });

        $.each(div_posts, function(key, div) {
            div.style.display = "block";
        });

    }

    function clearLanguages()
    {
        language = undefined;
        filterPost();
    }
    function clearCategory()
    {
        category = undefined;
        filterPost();
    }
    function clearScope()
    {
        scope_of_work = undefined;
        filterPost();
    }

    function clearAllFilters()
    {
        $.each($('.is-post'), function(k,v){
           v.style.display = "block";
        });
    }

    function setCategory(cat)
    {
        category = cat;
        filterPost();
    }

    function setLanguage(lang)
    {
        language = lang;
        filterPost();
    }

    function setScope(scope)
    {
        scope_of_work = scope;
        filterPost();
    }

    function createPost(posts)
    {
        posts.forEach(post => {
            console.log(post.code);
            console.log("Aniket");
            if(post.code === undefined || post.code===null ||post.code==='')
            {
                currentPosts += 1;
                            let likeStatus = "";
                            if (post.like_status) {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                        id="like-button` + post.post_id + `" class="like-button is-active">
                                        <i class="mdi mdi-heart not-liked bouncy"></i>
                                        <i class="mdi mdi-heart is-liked bouncy"></i>
                                        <span class="like-overlay"></span>
                                    </a>`;
                            }
                            else {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                                id="like-button` + post.post_id + `" class="like-button">
                                                <i class="mdi mdi-heart not-liked bouncy"></i>
                                                <i class="mdi mdi-heart is-liked bouncy"></i>
                                                <span class="like-overlay"></span>
                                            </a>`;
                            }
                            $('#refresh-div').append(`
<div id="feed-post-` + post.post_id + `" style="display: block;" class="card is-post `+ post.flag +`"
    data-category="` + post.category + `" data-language="` + post.language + `" data-id="` +
                            post.post_id + `" data-username="` + post.user + `" data-description="` + post.description +
                            `" data-counter="` + currentPosts + `" data-scope="` + post.scope_of_work + `"
    data-profile="` + post.profile + `"
    category="${post.category}"
    language="${post.language}"
    scope_of_work="${post.scope_of_work}"
    >
    <!-- Main wrap -->
    <div id="content-wrap`+ post.post_id +`" class="content-wrap">
        <!-- Post header -->
        <div class="card-heading">
            <!-- User meta -->
            <div class="user-block">
                <a class="image" href="`+ window.location.origin +`/user/profile/">
                    <img src="` + post.profile + `" data-user-popover="1" alt="">
                </a>
                <div class="user-info">
                    <a href="/user/profile/`+ post.user_id +`/">` + post.user + `</a>
                    <span class="time">` + post.timestamp + `</span>
                </div>
            </div>
            <!-- Right side dropdown -->
            <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
            <div id="options-`+ post.post_id +`" onclick="postOptions('`+ post.post_id +`')"
                class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                <div>
                    <div class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </div>
                </div>
                <div class="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <a onclick="BookMark('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="book-mark-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="`+ post.bookmark +`" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark">
                                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z">
                                                        </path>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Bookmark</h3>
                                    <small>Add this post to your bookmarks.</small>
                                </div>
                            </div>
                        </a>
<!--                        <a class="dropdown-item">-->
<!--                            <div class="media">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">-->
<!--                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>-->
<!--                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>-->
<!--                                                    </svg>-->
<!--                                <div class="media-content">-->
<!--                                    <h3>Notify me</h3>-->
<!--                                    <small>Send me the updates.</small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </a>-->
                        <hr class="dropdown-divider">
                        <a onclick="openFlag('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="flag-post-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag">
                                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z">
                                                        </path>
                                                        <line x1="4" y1="22" x2="4" y2="15"></line>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Flag</h3>
                                    <small>In case of inappropriate content.</small>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Post header -->

        <!-- Post body -->
        <div class="card-body">
            <!-- Post body text -->
            <div class="post-text">

                ` + post.description + `

            </div>
            <!-- Featured image -->
            <div class="post-image">
                `+(post.image1 != "" ? `
                <a data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image1 + `' %}"
                    href="` + post.image1 + `" data-demo-href="` + post.image1 + `' %}">
                    <center><img src="` + post.image1 + `" alt="" style="width: 100%;height: auto;margin-top: 1em;"></center>
                </a>
                ` : ``) +`
                `+ (post.image2 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image2 + `' %}"
                    href="` + post.image2 + `" data-demo-href="` + post.image2 + `' %}">
                    <img src="` + post.image2 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image3 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image3 + `' %}"
                    href="` + post.image3 + `" data-demo-href="` + post.image3 + `' %}">
                    <img src="` + post.image3 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image4 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image4 + `' %}"
                    href="` + post.image4 + `" data-demo-href="` + post.image4 + `' %}">
                    <img src="` + post.image4 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image5 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image5 + `' %}"
                    href="` + post.image5 + `" data-demo-href="` + post.image5 + `' %}">
                    <img src="` + post.image5 + `" alt="">
                </a>
                ` : ``)+`

                <!-- Action buttons -->
                <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                <div class="like-wrapper">
                    ` + likeStatus + `
                </div>

<!--                <div class="fab-wrapper is-share">-->
<!--                    <a href="javascript:void(0);" class="small-fab share-fab modal-trigger" data-modal="share-modal">-->
<!--                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link-2"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg>-->
<!--                    </a>-->
<!--                </div>-->

                <div class="fab-wrapper is-share is-active">
                    <a onclick="moreComments('` + post.post_id + `')" href="javascript:void(0);" class="small-fab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-message-circle">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <!-- /Post body -->

        <!-- Post footer -->
        <div class="card-footer">
            <!-- Followers avatars -->
            <!-- <div class="likers-group">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/dan.jpg' %}"
                                        data-user-popover="1" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/david.jpg' %}"
                                        data-user-popover="4" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/edward.jpeg"
                                        data-user-popover="5" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/milly.jpg' %}"
                                        data-user-popover="7" alt="">
                                </div> -->
            <!-- Followers text -->
            <div class="likers-text">
                <p><span class="likes-display` + post.post_id + `">` + post.likes + `</span> people liked this post
                </p>
            </div>
            <!-- Post statistics -->
            <div class="social-count" style="margin-top: 1em;">

                <div class="likes-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-heart">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                    <span class="likes-display` + post.post_id + `">` + post.likes + `</span>
                </div>

<!--                <div class="shares-count">-->
<!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"-->
<!--                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                        class="feather feather-link-2">-->
<!--                        <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>-->
<!--                        <line x1="8" y1="12" x2="16" y2="12"></line>-->
<!--                    </svg>-->
<!--                    <span>9</span>-->
<!--                </div>-->

                <div class="comments-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-circle">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span id="comment-counter` + post.post_id + `">`+ post.comments +`</span>
                </div>

            </div>
        </div>
        <!-- /Post footer -->
    </div>
    <!-- /Main wrap -->

    <!-- Post Comments -->

    <!-- /Post Comments -->
    <div id="comments-wrap`+ post.post_id +`" class="comments-wrap is-hidden">
        <!-- Header -->
        <div class="comments-heading">
            <h4>Comments
<!--                <small id="comment-header` + post.post_id + `">${post.comments}</small>-->
            </h4>
            <a onclick="closeComment('`+ post.post_id +`')" id="close-comment`+ post.post_id +`" class="close-comments">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </a>
        </div>
        <!-- /Header -->

        <!-- Comments body -->
        <div id="comment-body` + post.post_id + `" class="comments-body has-slimscroll"></div>
        <div id="load-more-comments-btn_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered">
                        <a onclick="moreComments(${post.post_id})" id="load-more" style="font-size: 14px;">Load More</a>
                    </div>
                    <div id="no-comment-tag_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered" style="display: none;">
                        <p>No more posts!...</p>
                    </div>
        <!-- /Comments body -->

        <!-- Comments footer -->
        <div class="card-footer">
            <div class="media post-comment has-emojis">
                <!-- Comment Textarea -->
                <div class="media-content">
                    <div class="field">
                        <div class="control">
                            <textarea name="comment` + post.post_id + `" id="post-comment-textarea-2"
                                class="textarea comment-textarea" rows="5" placeholder="Write a comment..."></textarea>
                        </div>
                    </div>
                    <center><small id="comment-text-action` + post.post_id + `" style="color: red; display: none;background: #FADBDE;padding: 0.5em;border-radius: 0.5em;">Enter some comment</small></>center>
                    <!-- Additional actions -->
                    <div class="actions">
                        <div class="image is-32x32">
                            <img class="is-rounded" src="{{request.user.get_profile_img}}"
                                data-demo-src="{{request.user.get_profile_img}}" data-user-popover="0"
                                alt="">
                        </div>
                        <div class="toolbar">
<!--                            <div class="action is-auto">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-at-sign">-->
<!--                                    <circle cx="12" cy="12" r="4"></circle>-->
<!--                                    <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                            <div class="action is-emoji" id="post-comment-button-2">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-smile">-->
<!--                                    <circle cx="12" cy="12" r="10"></circle>-->
<!--                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>-->
<!--                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>-->
<!--                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>-->
<!--                                </svg>-->
<!--                            </div>-->
                            <!-- <div class="action is-upload">
                                                    <i data-feather="camera"></i>
                                                    <input type="file" name="image" id="comment_image"
                                                        accept=".png, .jpg, .jpeg">
                                                </div> -->
                            <button onclick="postComment('` + post.post_id + `')"
                                class="button is-solid primary-button raised">Post
                                Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments footer -->
    </div>
</div>
                            `);
            }
            else{
                currentPosts += 1;
                            let likeStatus = "";
                            if (post.like_status) {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                        id="like-button` + post.post_id + `" class="like-button is-active">
                                        <i class="mdi mdi-heart not-liked bouncy"></i>
                                        <i class="mdi mdi-heart is-liked bouncy"></i>
                                        <span class="like-overlay"></span>
                                    </a>`;
                            }
                            else {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                                id="like-button` + post.post_id + `" class="like-button">
                                                <i class="mdi mdi-heart not-liked bouncy"></i>
                                                <i class="mdi mdi-heart is-liked bouncy"></i>
                                                <span class="like-overlay"></span>
                                            </a>`;
                            }
                            $('#refresh-div').append(`
<div id="feed-post-` + post.post_id + `" style="display: block;" class="card is-post `+ post.flag +`"
    data-category="` + post.category + `" data-language="` + post.language + `" data-id="` +
                            post.post_id + `" data-username="` + post.user + `" data-description="` + post.description +
                            `" data-counter="` + currentPosts + `" data-scope="` + post.scope_of_work + `"
    data-profile="` + post.profile + `"
    category="${post.category}"
    language="${post.language}"
    scope_of_work="${post.scope_of_work}"
    >
    <!-- Main wrap -->
    <div id="content-wrap`+ post.post_id +`" class="content-wrap">
        <!-- Post header -->
        <div class="card-heading">
            <!-- User meta -->
            <div class="user-block">
                <a class="image" href="`+ window.location.origin +`/user/profile/">
                    <img src="` + post.profile + `" data-user-popover="1" alt="">
                </a>
                <div class="user-info">
                    <a href="/user/profile/`+ post.user_id +`/">` + post.user + `</a>
                    <span class="time">` + post.timestamp + `</span>
                </div>
            </div>
            <!-- Right side dropdown -->
            <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
            <div id="options-`+ post.post_id +`" onclick="postOptions('`+ post.post_id +`')"
                class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                <div>
                    <div class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </div>
                </div>
                <div class="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <a onclick="BookMark('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="book-mark-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="`+ post.bookmark +`" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark">
                                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z">
                                                        </path>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Bookmark</h3>
                                    <small>Add this post to your bookmarks.</small>
                                </div>
                            </div>
                        </a>
<!--                        <a class="dropdown-item">-->
<!--                            <div class="media">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">-->
<!--                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>-->
<!--                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>-->
<!--                                                    </svg>-->
<!--                                <div class="media-content">-->
<!--                                    <h3>Notify me</h3>-->
<!--                                    <small>Send me the updates.</small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </a>-->
                        <hr class="dropdown-divider">
                        <a onclick="openFlag('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="flag-post-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag">
                                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z">
                                                        </path>
                                                        <line x1="4" y1="22" x2="4" y2="15"></line>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Flag</h3>
                                    <small>In case of inappropriate content.</small>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Post header -->

        <!-- Post body -->
        <div class="card-body">
            <!-- Post body text -->
            <div class="post-text">

                ` + post.description + `
                <div style="background-color: #f5f5f5;border-radius: 0.5em;padding: 0.5em;margin-top: 1em;"><pre><code>${post.code}</code></pre></div>
            </div>
            <!-- Featured image -->
            <div class="post-image">
                `+(post.image1 != "" ? `
                <a data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image1 + `' %}"
                    href="` + post.image1 + `" data-demo-href="` + post.image1 + `' %}">
                    <center><img src="` + post.image1 + `" alt="" style="width: 100%;height: auto;margin-top: 1em;"></center>
                </a>
                ` : ``) +`
                `+ (post.image2 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image2 + `' %}"
                    href="` + post.image2 + `" data-demo-href="` + post.image2 + `' %}">
                    <img src="` + post.image2 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image3 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image3 + `' %}"
                    href="` + post.image3 + `" data-demo-href="` + post.image3 + `' %}">
                    <img src="` + post.image3 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image4 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image4 + `' %}"
                    href="` + post.image4 + `" data-demo-href="` + post.image4 + `' %}">
                    <img src="` + post.image4 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image5 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image5 + `' %}"
                    href="` + post.image5 + `" data-demo-href="` + post.image5 + `' %}">
                    <img src="` + post.image5 + `" alt="">
                </a>
                ` : ``)+`

                <!-- Action buttons -->
                <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                <div class="like-wrapper">
                    ` + likeStatus + `
                </div>

<!--                <div class="fab-wrapper is-share">-->
<!--                    <a href="javascript:void(0);" class="small-fab share-fab modal-trigger" data-modal="share-modal">-->
<!--                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link-2"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg>-->
<!--                    </a>-->
<!--                </div>-->

                <div class="fab-wrapper is-share is-active">
                    <a onclick="moreComments('` + post.post_id + `')" href="javascript:void(0);" class="small-fab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-message-circle">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <!-- /Post body -->

        <!-- Post footer -->
        <div class="card-footer">
            <!-- Followers avatars -->
            <!-- <div class="likers-group">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/dan.jpg' %}"
                                        data-user-popover="1" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/david.jpg' %}"
                                        data-user-popover="4" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/edward.jpeg"
                                        data-user-popover="5" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/milly.jpg' %}"
                                        data-user-popover="7" alt="">
                                </div> -->
            <!-- Followers text -->
            <div class="likers-text">
                <p><span class="likes-display` + post.post_id + `">` + post.likes + `</span> people liked this post
                </p>
            </div>
            <!-- Post statistics -->
            <div class="social-count" style="margin-top: 1em;">

                <div class="likes-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-heart">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                    <span class="likes-display` + post.post_id + `">` + post.likes + `</span>
                </div>

<!--                <div class="shares-count">-->
<!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"-->
<!--                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                        class="feather feather-link-2">-->
<!--                        <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>-->
<!--                        <line x1="8" y1="12" x2="16" y2="12"></line>-->
<!--                    </svg>-->
<!--                    <span>9</span>-->
<!--                </div>-->

                <div class="comments-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-circle">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span id="comment-counter` + post.post_id + `">`+ post.comments +`</span>
                </div>

            </div>
        </div>
        <!-- /Post footer -->
    </div>
    <!-- /Main wrap -->

    <!-- Post Comments -->

    <!-- /Post Comments -->
    <div id="comments-wrap`+ post.post_id +`" class="comments-wrap is-hidden">
        <!-- Header -->
        <div class="comments-heading">
            <h4>Comments
<!--                <small id="comment-header` + post.post_id + `">${post.comments}</small>-->
            </h4>
            <a onclick="closeComment('`+ post.post_id +`')" id="close-comment`+ post.post_id +`" class="close-comments">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </a>
        </div>
        <!-- /Header -->

        <!-- Comments body -->
        <div id="comment-body` + post.post_id + `" class="comments-body has-slimscroll"></div>
        <div id="load-more-comments-btn_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered">
                        <a onclick="moreComments(${post.post_id})" id="load-more" style="font-size: 14px;">Load More</a>
                    </div>
                    <div id="no-comment-tag_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered" style="display: none;">
                        <p>No more posts!...</p>
                    </div>
        <!-- /Comments body -->

        <!-- Comments footer -->
        <div class="card-footer">
            <div class="media post-comment has-emojis">
                <!-- Comment Textarea -->
                <div class="media-content">
                    <div class="field">
                        <div class="control">
                            <textarea name="comment` + post.post_id + `" id="post-comment-textarea-2"
                                class="textarea comment-textarea" rows="5" placeholder="Write a comment..."></textarea>
                        </div>
                    </div>
                    <center><small id="comment-text-action` + post.post_id + `"  style="color: red; display: none;background: #FADBDE;padding: 0.5em;border-radius: 0.5em;">Enter some comment</small></center>
                    <!-- Additional actions -->
                    <div class="actions">
                        <div class="image is-32x32">
                            <img class="is-rounded" src="{{request.user.get_profile_img}}"
                                data-demo-src="{{request.user.get_profile_img}}" data-user-popover="0"
                                alt="">
                        </div>
                        <div class="toolbar">
<!--                            <div class="action is-auto">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-at-sign">-->
<!--                                    <circle cx="12" cy="12" r="4"></circle>-->
<!--                                    <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                            <div class="action is-emoji" id="post-comment-button-2">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-smile">-->
<!--                                    <circle cx="12" cy="12" r="10"></circle>-->
<!--                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>-->
<!--                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>-->
<!--                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>-->
<!--                                </svg>-->
<!--                            </div>-->
                            <!-- <div class="action is-upload">
                                                    <i data-feather="camera"></i>
                                                    <input type="file" name="image" id="comment_image"
                                                        accept=".png, .jpg, .jpeg">
                                                </div> -->
                            <button onclick="postComment('` + post.post_id + `')"
                                class="button is-solid primary-button raised">Post
                                Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments footer -->
    </div>
</div>
                            `);
            }

                        });
        filterPost();
    }

    function createPostOnReady(posts)
    {
        posts.forEach(post => {
            console.log(post.code);
            console.log("Aniket");
            if(post.code === undefined || post.code===null ||post.code==='')
            {
                currentPosts += 1;
                            let likeStatus = "";
                            if (post.like_status) {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                        id="like-button` + post.post_id + `" class="like-button is-active">
                                        <i class="mdi mdi-heart not-liked bouncy"></i>
                                        <i class="mdi mdi-heart is-liked bouncy"></i>
                                        <span class="like-overlay"></span>
                                    </a>`;
                            }
                            else {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                                id="like-button` + post.post_id + `" class="like-button">
                                                <i class="mdi mdi-heart not-liked bouncy"></i>
                                                <i class="mdi mdi-heart is-liked bouncy"></i>
                                                <span class="like-overlay"></span>
                                            </a>`;
                            }
                            $('#refresh-div').append(`
<div id="feed-post-` + post.post_id + `" style="display: block;" class="card is-post `+ post.flag +`"
    data-category="` + post.category + `" data-language="` + post.language + `" data-id="` +
                            post.post_id + `" data-username="` + post.user + `" data-description="` + post.description +
                            `" data-counter="` + currentPosts + `" data-scope="` + post.scope_of_work + `"
    data-profile="` + post.profile + `"
    category="${post.category}"
    language="${post.language}"
    scope_of_work="${post.scope_of_work}"
    >
    <!-- Main wrap -->
    <div id="content-wrap`+ post.post_id +`" class="content-wrap">
        <!-- Post header -->
        <div class="card-heading">
            <!-- User meta -->
            <div class="user-block">
                <a class="image" href="`+ window.location.origin +`/user/profile/">
                    <img src="` + post.profile + `" data-user-popover="1" alt="">
                </a>
                <div class="user-info">
                    <a href="/user/profile/`+ post.user_id +`/">` + post.user + `</a>
                    <span class="time">` + post.timestamp + `</span>
                </div>
            </div>
            <!-- Right side dropdown -->
            <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
            <div id="options-`+ post.post_id +`" onclick="postOptions('`+ post.post_id +`')"
                class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                <div>
                    <div class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </div>
                </div>
                <div class="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <a onclick="BookMark('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="book-mark-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="`+ post.bookmark +`" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark">
                                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z">
                                                        </path>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Bookmark</h3>
                                    <small>Add this post to your bookmarks.</small>
                                </div>
                            </div>
                        </a>
<!--                        <a class="dropdown-item">-->
<!--                            <div class="media">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">-->
<!--                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>-->
<!--                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>-->
<!--                                                    </svg>-->
<!--                                <div class="media-content">-->
<!--                                    <h3>Notify me</h3>-->
<!--                                    <small>Send me the updates.</small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </a>-->
                        <hr class="dropdown-divider">
                        <a onclick="openFlag('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="flag-post-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag">
                                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z">
                                                        </path>
                                                        <line x1="4" y1="22" x2="4" y2="15"></line>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Flag</h3>
                                    <small>In case of inappropriate content.</small>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Post header -->

        <!-- Post body -->
        <div class="card-body">
            <!-- Post body text -->
            <div class="post-text">

                ` + post.description + `

            </div>
            <!-- Featured image -->
            <div class="post-image">
                `+(post.image1 != "" ? `
                <a data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image1 + `' %}"
                    href="` + post.image1 + `" data-demo-href="` + post.image1 + `' %}">
                    <center><img src="` + post.image1 + `" alt="" style="width: 100%;height: auto;margin-top: 1em;"></center>
                </a>
                ` : ``) +`
                `+ (post.image2 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image2 + `' %}"
                    href="` + post.image2 + `" data-demo-href="` + post.image2 + `' %}">
                    <img src="` + post.image2 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image3 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image3 + `' %}"
                    href="` + post.image3 + `" data-demo-href="` + post.image3 + `' %}">
                    <img src="` + post.image3 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image4 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image4 + `' %}"
                    href="` + post.image4 + `" data-demo-href="` + post.image4 + `' %}">
                    <img src="` + post.image4 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image5 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image5 + `' %}"
                    href="` + post.image5 + `" data-demo-href="` + post.image5 + `' %}">
                    <img src="` + post.image5 + `" alt="">
                </a>
                ` : ``)+`

                <!-- Action buttons -->
                <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                <div class="like-wrapper">
                    ` + likeStatus + `
                </div>

<!--                <div class="fab-wrapper is-share">-->
<!--                    <a href="javascript:void(0);" class="small-fab share-fab modal-trigger" data-modal="share-modal">-->
<!--                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link-2"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg>-->
<!--                    </a>-->
<!--                </div>-->

                <div class="fab-wrapper is-share is-active">
                    <a onclick="moreComments('` + post.post_id + `')" href="javascript:void(0);" class="small-fab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-message-circle">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <!-- /Post body -->

        <!-- Post footer -->
        <div class="card-footer">
            <!-- Followers avatars -->
            <!-- <div class="likers-group">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/dan.jpg' %}"
                                        data-user-popover="1" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/david.jpg' %}"
                                        data-user-popover="4" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/edward.jpeg"
                                        data-user-popover="5" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/milly.jpg' %}"
                                        data-user-popover="7" alt="">
                                </div> -->
            <!-- Followers text -->
            <div class="likers-text">
                <p><span class="likes-display` + post.post_id + `">` + post.likes + `</span> people liked this post
                </p>
            </div>
            <!-- Post statistics -->
            <div class="social-count" style="margin-top: 1em;">

                <div class="likes-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-heart">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                    <span class="likes-display` + post.post_id + `">` + post.likes + `</span>
                </div>

<!--                <div class="shares-count">-->
<!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"-->
<!--                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                        class="feather feather-link-2">-->
<!--                        <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>-->
<!--                        <line x1="8" y1="12" x2="16" y2="12"></line>-->
<!--                    </svg>-->
<!--                    <span>9</span>-->
<!--                </div>-->

                <div class="comments-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-circle">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span id="comment-counter` + post.post_id + `">`+ post.comments +`</span>
                </div>

            </div>
        </div>
        <!-- /Post footer -->
    </div>
    <!-- /Main wrap -->

    <!-- Post Comments -->

    <!-- /Post Comments -->
    <div id="comments-wrap`+ post.post_id +`" class="comments-wrap is-hidden">
        <!-- Header -->
        <div class="comments-heading">
            <h4>Comments
<!--                <small id="comment-header` + post.post_id + `">${post.comments}</small>-->
            </h4>
            <a onclick="closeComment('`+ post.post_id +`')" id="close-comment`+ post.post_id +`" class="close-comments">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </a>
        </div>
        <!-- /Header -->

        <!-- Comments body -->
        <div id="comment-body` + post.post_id + `" class="comments-body has-slimscroll"></div>
        <div id="load-more-comments-btn_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered">
                        <a onclick="moreComments(${post.post_id})" id="load-more" style="font-size: 14px;">Load More</a>
                    </div>
                    <div id="no-comment-tag_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered" style="display: none;">
                        <p>No more posts!...</p>
                    </div>
        <!-- /Comments body -->

        <!-- Comments footer -->
        <div class="card-footer">
            <div class="media post-comment has-emojis">
                <!-- Comment Textarea -->
                <div class="media-content">
                    <div class="field">
                        <div class="control">
                            <textarea name="comment` + post.post_id + `" id="post-comment-textarea-2"
                                class="textarea comment-textarea" rows="5" placeholder="Write a comment..."></textarea>
                        </div>
                    </div>
                    <center><small id="comment-text-action` + post.post_id + `" style="color: red; display: none;background: #FADBDE;padding: 0.5em;border-radius: 0.5em;">Enter some comment</small></center>
                    <!-- Additional actions -->
                    <div class="actions">
                        <div class="image is-32x32">
                            <img class="is-rounded" src="{{request.user.get_profile_img}}"
                                data-demo-src="{{request.user.get_profile_img}}" data-user-popover="0"
                                alt="">
                        </div>
                        <div class="toolbar">
<!--                            <div class="action is-auto">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-at-sign">-->
<!--                                    <circle cx="12" cy="12" r="4"></circle>-->
<!--                                    <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                            <div class="action is-emoji" id="post-comment-button-2">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-smile">-->
<!--                                    <circle cx="12" cy="12" r="10"></circle>-->
<!--                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>-->
<!--                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>-->
<!--                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>-->
<!--                                </svg>-->
<!--                            </div>-->
                            <!-- <div class="action is-upload">
                                                    <i data-feather="camera"></i>
                                                    <input type="file" name="image" id="comment_image"
                                                        accept=".png, .jpg, .jpeg">
                                                </div> -->
                            <button onclick="postComment('` + post.post_id + `')"
                                class="button is-solid primary-button raised">Post
                                Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments footer -->

    </div>
</div>
                            `);
            }
            else{
                currentPosts += 1;
                            let likeStatus = "";
                            if (post.like_status) {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                        id="like-button` + post.post_id + `" class="like-button is-active">
                                        <i class="mdi mdi-heart not-liked bouncy"></i>
                                        <i class="mdi mdi-heart is-liked bouncy"></i>
                                        <span class="like-overlay"></span>
                                    </a>`;
                            }
                            else {
                                likeStatus = `<a onclick="like('` + post.post_id + `', '{{request.user}}')"
                                                id="like-button` + post.post_id + `" class="like-button">
                                                <i class="mdi mdi-heart not-liked bouncy"></i>
                                                <i class="mdi mdi-heart is-liked bouncy"></i>
                                                <span class="like-overlay"></span>
                                            </a>`;
                            }
                            $('#refresh-div').append(`
<div id="feed-post-` + post.post_id + `" style="display: block;" class="card is-post `+ post.flag +`"
    data-category="` + post.category + `" data-language="` + post.language + `" data-id="` +
                            post.post_id + `" data-username="` + post.user + `" data-description="` + post.description +
                            `" data-counter="` + currentPosts + `" data-scope="` + post.scope_of_work + `"
    data-profile="` + post.profile + `"
    category="${post.category}"
    language="${post.language}"
    scope_of_work="${post.scope_of_work}"
    >
    <!-- Main wrap -->
    <div id="content-wrap`+ post.post_id +`" class="content-wrap">
        <!-- Post header -->
        <div class="card-heading">
            <!-- User meta -->
            <div class="user-block">
                <a class="image" href="`+ window.location.origin +`/user/profile/">
                    <img src="` + post.profile + `" data-user-popover="1" alt="">
                </a>
                <div class="user-info">
                    <a href="/user/profile/`+ post.user_id +`/">` + post.user + `</a>
                    <span class="time">` + post.timestamp + `</span>
                </div>
            </div>
            <!-- Right side dropdown -->
            <!-- /partials/pages/feed/dropdowns/feed-post-dropdown.html -->
            <div id="options-`+ post.post_id +`" onclick="postOptions('`+ post.post_id +`')"
                class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                <div>
                    <div class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-more-vertical">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </div>
                </div>
                <div class="dropdown-menu" role="menu">
                    <div class="dropdown-content">
                        <a onclick="BookMark('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="book-mark-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="`+ post.bookmark +`" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bookmark">
                                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z">
                                                        </path>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Bookmark</h3>
                                    <small>Add this post to your bookmarks.</small>
                                </div>
                            </div>
                        </a>
<!--                        <a class="dropdown-item">-->
<!--                            <div class="media">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell">-->
<!--                                                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>-->
<!--                                                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>-->
<!--                                                    </svg>-->
<!--                                <div class="media-content">-->
<!--                                    <h3>Notify me</h3>-->
<!--                                    <small>Send me the updates.</small>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </a>-->
                        <hr class="dropdown-divider">
                        <a onclick="openFlag('`+ post.post_id +`')" class="dropdown-item">
                            <div class="media">
                                <svg id="flag-post-`+ post.post_id +`" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-flag">
                                                        <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z">
                                                        </path>
                                                        <line x1="4" y1="22" x2="4" y2="15"></line>
                                                    </svg>
                                <div class="media-content">
                                    <h3>Flag</h3>
                                    <small>In case of inappropriate content.</small>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Post header -->

        <!-- Post body -->
        <div class="card-body">
            <!-- Post body text -->
            <div class="post-text">

                ` + post.description + `
                <div style="background-color: #f5f5f5;border-radius: 0.5em;padding: 0.5em;margin-top: 1em;"><pre><code>${post.code}</code></pre></div>
            </div>
            <!-- Featured image -->
            <div class="post-image">
                `+(post.image1 != "" ? `
                <a data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image1 + `' %}"
                    href="` + post.image1 + `" data-demo-href="` + post.image1 + `' %}">
                    <center><img src="` + post.image1 + `" alt="" style="width: 100%;height: auto;margin-top: 1em;"></center>
                </a>
                ` : ``) +`
                `+ (post.image2 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image2 + `' %}"
                    href="` + post.image2 + `" data-demo-href="` + post.image2 + `' %}">
                    <img src="` + post.image2 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image3 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image3 + `' %}"
                    href="` + post.image3 + `" data-demo-href="` + post.image3 + `' %}">
                    <img src="` + post.image3 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image4 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image4 + `' %}"
                    href="` + post.image4 + `" data-demo-href="` + post.image4 + `' %}">
                    <img src="` + post.image4 + `" alt="">
                </a>
                ` : ``)+`
                `+ (post.image5 != "" ? `
                <a class="is-hidden" data-fancybox="post`+ post.post_id +`" data-lightbox-type="comments" data-thumb="` + post.image5 + `' %}"
                    href="` + post.image5 + `" data-demo-href="` + post.image5 + `' %}">
                    <img src="` + post.image5 + `" alt="">
                </a>
                ` : ``)+`

                <!-- Action buttons -->
                <!-- /partials/pages/feed/buttons/feed-post-actions.html -->
                <div class="like-wrapper">
                    ` + likeStatus + `
                </div>

<!--                <div class="fab-wrapper is-share">-->
<!--                    <a href="javascript:void(0);" class="small-fab share-fab modal-trigger" data-modal="share-modal">-->
<!--                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link-2"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg>-->
<!--                    </a>-->
<!--                </div>-->

                <div class="fab-wrapper is-share is-active">
                    <a onclick="moreComments('` + post.post_id + `')" href="javascript:void(0);" class="small-fab">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="feather feather-message-circle">
                            <path
                                d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <!-- /Post body -->

        <!-- Post footer -->
        <div class="card-footer">
            <!-- Followers avatars -->
            <!-- <div class="likers-group">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/dan.jpg' %}"
                                        data-user-popover="1" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/david.jpg' %}"
                                        data-user-popover="4" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/edward.jpeg"
                                        data-user-popover="5" alt="">
                                    <img src="https://via.placeholder.com/300x300"
                                        data-demo-src="{% static 'social_assets/img/avatars/milly.jpg' %}"
                                        data-user-popover="7" alt="">
                                </div> -->
            <!-- Followers text -->
            <div class="likers-text">
                <p><span class="likes-display` + post.post_id + `">` + post.likes + `</span> people liked this post
                </p>
            </div>
            <!-- Post statistics -->
            <div class="social-count" style="margin-top: 1em;">

                <div class="likes-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-heart">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                        </path>
                    </svg>
                    <span class="likes-display` + post.post_id + `">` + post.likes + `</span>
                </div>

<!--                <div class="shares-count">-->
<!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"-->
<!--                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"-->
<!--                        class="feather feather-link-2">-->
<!--                        <path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path>-->
<!--                        <line x1="8" y1="12" x2="16" y2="12"></line>-->
<!--                    </svg>-->
<!--                    <span>9</span>-->
<!--                </div>-->

                <div class="comments-count">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-message-circle">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span id="comment-counter` + post.post_id + `">`+ post.comments +`</span>
                </div>

            </div>
        </div>
        <!-- /Post footer -->
    </div>
    <!-- /Main wrap -->

    <!-- Post Comments -->

    <!-- /Post Comments -->
    <div id="comments-wrap`+ post.post_id +`" class="comments-wrap is-hidden">
        <!-- Header -->
        <div class="comments-heading">
            <h4>Comments
<!--                <small id="comment-header` + post.post_id + `">${post.comments}</small>-->
            </h4>
            <a onclick="closeComment('`+ post.post_id +`')" id="close-comment`+ post.post_id +`" class="close-comments">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-x">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </a>
        </div>
        <!-- /Header -->

        <!-- Comments body -->
        <div id="comment-body` + post.post_id + `" class="comments-body has-slimscroll"></div>
        <div id="load-more-comments-btn_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered">
                        <a onclick="moreComments(${post.post_id})" id="load-more" style="font-size: 14px;">Load More</a>
                    </div>
                    <div id="no-comment-tag_${post.post_id}" class=" load-more-wrap narrow-top has-text-centered" style="display: none;">
                        <p>No more posts!...</p>
                    </div>
        <!-- /Comments body -->

        <!-- Comments footer -->
        <div class="card-footer">
            <div class="media post-comment has-emojis">
                <!-- Comment Textarea -->
                <div class="media-content">
                    <div class="field">
                        <div class="control">
                            <textarea name="comment` + post.post_id + `" id="post-comment-textarea-2"
                                class="textarea comment-textarea" rows="5" placeholder="Write a comment..."></textarea>
                        </div>
                    </div>
                    <center><small id="comment-text-action` + post.post_id + `" style="color: red; display: none;background: #FADBDE;padding: 0.5em;border-radius: 0.5em;">Enter some comment</small></center>
                    <!-- Additional actions -->
                    <div class="actions">
                        <div class="image is-32x32">
                            <img class="is-rounded" src="{{request.user.get_profile_img}}"
                                data-demo-src="{{request.user.get_profile_img}}" data-user-popover="0"
                                alt="">
                        </div>
                        <div class="toolbar">
<!--                            <div class="action is-auto">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-at-sign">-->
<!--                                    <circle cx="12" cy="12" r="4"></circle>-->
<!--                                    <path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>-->
<!--                                </svg>-->
<!--                            </div>-->
<!--                            <div class="action is-emoji" id="post-comment-button-2">-->
<!--                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"-->
<!--                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"-->
<!--                                    stroke-linejoin="round" class="feather feather-smile">-->
<!--                                    <circle cx="12" cy="12" r="10"></circle>-->
<!--                                    <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>-->
<!--                                    <line x1="9" y1="9" x2="9.01" y2="9"></line>-->
<!--                                    <line x1="15" y1="9" x2="15.01" y2="9"></line>-->
<!--                                </svg>-->
<!--                            </div>-->
                            <!-- <div class="action is-upload">
                                                    <i data-feather="camera"></i>
                                                    <input type="file" name="image" id="comment_image"
                                                        accept=".png, .jpg, .jpeg">
                                                </div> -->
                            <button onclick="postComment('` + post.post_id + `')"
                                class="button is-solid primary-button raised">Post
                                Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments footer -->
    </div>
</div>
                            `);
            }

                        });
    }


    function getSingleComment(id)
    {
        $.ajax({
            async: true,
            method: "GET",
            url: "{% url 'post:get-single-comment' %}",
            data: {
                'post_id': id,
            },
            success: function (response) {
                    response.comments.forEach(data =>
            {

            if (data.user_profile === '') {
                    var profile = "{% static 'social_assets/img/avatars/dan.jpg' %}";
                } else {
                    var profile = window.location.origin + data.user_profile;
                }
                document.getElementById('comment-body' + data.post_id).innerHTML +=
                    `
                            <div class="media is-comment">
                            <div class="media-left">
                                <div class="image">
                                    <img src="` + profile + `"
                                        data-demo-src="" data-user-popover="1" alt="">
                                </div>
                            </div>
                            <div class="media-content">
                                <a href="/user/profile/` + data.post_user_id +`">` + data.post_user + `</a>
                                <span class="time">` + data.user + `  &nbsp;&nbsp; - &nbsp;&nbsp;`+ data.timestamp +` </span>
                                <p>` + data.comment + `</p>

                                <div class="controls">
<!--                                    <div class="like-count">-->
<!--                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-thumbs-up"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg>-->
<!--                                        <span>4</span>-->
<!--                                    </div>-->
<!--                                    <div class="reply">-->
<!--                                        <a>Reply</a>-->
<!--                                    </div>-->
<!--                                    <div class="edit">-->
<!--                                        <a>Edit</a>-->
<!--                                    </div>-->
                                </div>
                            </div>
                            <div class="media-right">
                                <div class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                                    <div>
                                        <div class="button">
                                            <i data-feather="more-vertical"></i>
                                        </div>
                                    </div>
                                    <div class="dropdown-menu" role="menu">
                                        <div class="dropdown-content">
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="x"></i>
                                                    <div class="media-content">
                                                        <h3>Hide</h3>
                                                        <small>Hide this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="flag"></i>
                                                    <div class="media-content">
                                                        <h3>Report</h3>
                                                        <small>Report this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
        }
        );
            },
        })
    }

    function createComment(id, comments)
    {
        comments.forEach(data =>

            {

            if (data.user_profile === '') {
                    var profile = "{% static 'social_assets/img/avatars/dan.jpg' %}";
                } else {
                    var profile = window.location.origin + data.user_profile;
                }
                document.getElementById('comment-body' + id).innerHTML +=
                    `
                            <div class="media is-comment">
                            <div class="media-left">
                                <div class="image">
                                    <img src="` + profile + `"
                                        data-demo-src="" data-user-popover="1" alt="">
                                </div>
                            </div>
                            <div class="media-content">
                                <a href="/user/profile/` + data.post_user_id +`">` + data.post_user + `</a>
                                <span class="time">` + data.user + `  &nbsp;&nbsp; - &nbsp;&nbsp;`+ data.timestamp +` </span>
                                <p>` + data.comment + `</p>

                                <div class="controls">
<!--                                    <div class="like-count">-->
<!--                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-thumbs-up"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg>-->
<!--                                        <span>4</span>-->
<!--                                    </div>-->
<!--                                    <div class="reply">-->
<!--                                        <a>Reply</a>-->
<!--                                    </div>-->
<!--                                    <div class="edit">-->
<!--                                        <a>Edit</a>-->
<!--                                    </div>-->
                                </div>
                            </div>
                            <div class="media-right">
                                <div class="dropdown is-spaced is-right is-neutral dropdown-trigger">
                                    <div>
                                        <div class="button">
                                            <i data-feather="more-vertical"></i>
                                        </div>
                                    </div>
                                    <div class="dropdown-menu" role="menu">
                                        <div class="dropdown-content">
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="x"></i>
                                                    <div class="media-content">
                                                        <h3>Hide</h3>
                                                        <small>Hide this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item">
                                                <div class="media">
                                                    <i data-feather="flag"></i>
                                                    <div class="media-content">
                                                        <h3>Report</h3>
                                                        <small>Report this comment.</small>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
        }
        );
    }

    function moreComments(post_id)
    {
        $("#comment-text-action" + post_id).css({
            display: "none"
        });
        $('#comments-wrap' + post_id).removeClass('is-hidden');
        $('#content-wrap' + post_id).addClass('is-hidden');

        currentComments = $(`#comment-body${post_id} .is-comment`).length;
        $.ajax({
            async: true,
            method: "GET",
            url: "{% url 'post:load-more-comments' %}",
            data: {
                'post_id': post_id,
                'current_comments': currentComments,
            },
            success: function (response) {
                console.log(response);
                    if (response.Status == false) {
                        $(`#load-more-comments-btn_${post_id}`).css('display', 'none');
                        $(`#no-comments-tag_${post_id}`).css('display', 'block');
                    } else {
                        createComment(post_id,response.comments);
                    }
            },
        })
    }


    function morePost()
    {
        console.log("More function called");
        currentPosts = $('.is-post').length;
        $.ajax({
            async: true,
            method: "GET",
            url: "{% url 'post:load-more-post' %}",
            data: {
                'current_posts': currentPosts,
            },
            success: function (response) {
                $('#load-more').removeClass('loading');
                    if (response.Status == false) {
                        $('#load-more-btn').css('display', 'none');
                        $('#no-post-tag').css('display', 'block');
                    } else {
                        createPost(response.posts);
                    }
            },
            error: function (response) {
                console.log(response);
            },
        });
    }

    function morePostOnReady()
    {
        console.log("More function called");
        currentPosts = $('.is-post').length;
        $.ajax({
            async: true,
            method: "GET",
            url: "{% url 'post:load-more-post' %}",
            data: {
                'current_posts': currentPosts,
            },
            success: function (response) {
                $('#load-more').removeClass('loading');
                    if (response.Status == false) {
                        $('#load-more-btn').css('display', 'none');
                        $('#no-post-tag').css('display', 'block');
                    } else {
                        createPostOnReady(response.posts);
                    }
            },
            error: function (response) {
                console.log(response);
            },
        });
    }
    $(document).ready(function () {
        morePostOnReady();
    });
</script>

</body>
</html>